<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>ini&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="不要听一个人说什么，而看他怎么做。">
<meta property="og:type" content="website">
<meta property="og:title" content="ini&#39;s Blog">
<meta property="og:url" content="http://inicb.com/page/2/index.html">
<meta property="og:site_name" content="ini&#39;s Blog">
<meta property="og:description" content="不要听一个人说什么，而看他怎么做。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ini&#39;s Blog">
<meta name="twitter:description" content="不要听一个人说什么，而看他怎么做。">
    

    
        <link rel="alternate" href="/" title="ini&#39;s Blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">ini&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <!-- <button type="submit" class="search-form-submit"></button> -->
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>

        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">ini</h2>
            <h3 id="title">Android Developer &amp; Ios Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Jilin , China</span>
            <a id="follow" target="_blank" href="https://github.com/jianlei/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                77
                <span>文章</span>
            </div>
            <div class="article-info-block">
                59
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/jianlei" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            
            <section id="main">
    <article id="post-Nginx代理proxy-pass配置去除location路径前缀" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/4ead88f7.html">(转)Nginx代理proxy pass配置去除location路径前缀</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/4ead88f7.html">
            <time datetime="2020-05-11T00:24:26.000Z" itemprop="datePublished">2020-05-11</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Nginx/">Nginx</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>我们在使用Nginx做代理的时候，可以简单的直接把请求原封不动的转发给下一个服务。</p>
<p>比如，访问abc.com/appv2/a/b.html, 要求转发到localhost:8088/appv2/a/b.html</p>
<p>简单配置如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">upstream one &#123;</span><br><span class="line">  server localhost:8088 weight=5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen              80;</span><br><span class="line">    server_name         abc.com;</span><br><span class="line">    access_log  &quot;pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G&quot;  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header  X-Real-IP        $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://one;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>即，设置proxy_pass即可。请求只会替换域名。</p>
<p>但很多时候，我们需要根据url的前缀转发到不同的服务。</p>
<p>比如<br>abc.com/user/profile.html转发到 用户服务localhost:8089/profile.html</p>
<p>abc.com/order/details.html转发到 订单服务 localhost:8090/details.html</p>
<p>即，url的前缀对下游的服务是不需要的，除非下游服务添加context-path, 但很多时候我们并不喜欢加这个。如果Nginx转发的时候，把这个前缀去掉就好了。</p>
<ul>
<li>一个种方案是proxy_pass后面加根路径 /<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen              80;</span><br><span class="line">    server_name         abc.com;</span><br><span class="line">    access_log  &quot;pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G&quot;  main;</span><br><span class="line"></span><br><span class="line">    location ^~/user/ &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header  X-Real-IP        $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://user/;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ^~/order/ &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header  X-Real-IP        $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://order/;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>^~/user/表示匹配前缀是user的请求，proxy_pass的结尾有/， 则会把/user/* 后面的路径直接拼接到后面，即移除user.</p>
<ul>
<li>另一种方案是使用rewrite<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">upstream user &#123;</span><br><span class="line">  server localhost:8089 weight=5;</span><br><span class="line">&#125;</span><br><span class="line">upstream order &#123;</span><br><span class="line">  server localhost:8090 weight=5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen              80;</span><br><span class="line">    server_name         abc.com;</span><br><span class="line">    access_log  &quot;pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G&quot;  main;</span><br><span class="line"></span><br><span class="line">    location ^~/user/ &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header  X-Real-IP        $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line"></span><br><span class="line">        rewrite ^/user/(.*)$ /$1 break;</span><br><span class="line">        proxy_pass http://user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ^~/order/ &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header  X-Real-IP        $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-NginX-Proxy true;</span><br><span class="line"></span><br><span class="line">        rewrite ^/order/(.*)$ /$1 break;</span><br><span class="line">        proxy_pass http://order;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>注意到proxy_pass结尾没有/， rewrite重写了url。</p>
<p>对于文件映射也可以使用这两种方式，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /dafile &#123;  </span><br><span class="line">    #rewrite ^/dafile/(.*)$ /$1 last;</span><br><span class="line">    proxy_pass http://172.31.8.168:8141/;//文件服务器nginx路径</span><br><span class="line">    #return 7;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://www.cnblogs.com/woshimrf/p/nginx-proxy-rewrite-url.html" target="_blank" rel="noopener">Nginx代理proxy pass配置去除location路径前缀</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-如何给没有连接互联网的centos使用yum安装其他软件" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/7bfbc9bd.html">如何给没有连接互联网的centos使用yum安装其他软件</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/7bfbc9bd.html">
            <time datetime="2020-04-24T13:04:39.000Z" itemprop="datePublished">2020-04-24</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Linux/">Linux</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>在工作中，在生产中经常会遇到这样的情况，服务器部署环境无法链接互联网，只能在内网运行。这时候如果使用Centos系统，就会发现安装软件是一件很痛苦的事情，不知道如何下手，因为如果有外网环境的话，在Centos下安装软件和开发工具是意见很麻烦的事情，因为linux上通过yum安装软件的时候是需要把相关的依赖也会安装的，所以如果只copy一个rpm包到服务器上安装是无法完成安装的。</p>
<p>下面介绍一种可以在无网环境的Linux下安装软件和开发工具的方法。</p>
<p>首先准备一台跟目标服务器操作系统、环境一样的机器，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">机器A. 192.168.10.12 有外网访问权限</span><br><span class="line">机器B. 192.168.10.13 无外网访问权限</span><br></pre></td></tr></table></figure></p>
<p>我们的目标就是在机器B上安装我们需要的软件。</p>
<h4 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h4><blockquote><p>借助yum安装的“缓存”，在有网的机器上打开yum的keepcache开关，把下载的软件和相应的依赖缓存起来，然后copy缓存到目标机器上，在目标机器上正常通过yum进行安装。</p>
</blockquote>
<ul>
<li>1.需要在一台可以连外网的机子上安装一个同版本的centos的虚拟机。可能不同的版本包含了不同的基层依赖包，这样有可能会导致后续的安装失败。</li>
<li>2.修改两台机器上的yum配置文件  /etc/yum.conf  ,将 keepcache=0  修改成  keepcache=1， 打开缓存开关。因为yum在安装的时候会先去缓存查找，如果没有查找成功则会去网络下载。</li>
<li><ol>
<li>在机器A上使用yum命令安装需要的软件。比如 sudo yum install -y yum-utils， 这个时候yum-utils的安装缓存就会保存起来。 在目录  /var/cache/yum/ 下可以看到，一般来说是个 x86_64的文件夹。</li>
</ol>
</li>
<li><ol>
<li>Copy机器A上 /var/cache/yum/的目录文件到机器B上的相应目录。</li>
</ol>
</li>
<li>5.在机器B上执行 yum install -y yum-utils,完成软件的安装。</li>
</ul>
<p>至此，就可以在无网的linux服务器完成软件的安装了。</p>
<p>注意，如果在有网的机器上添加了相应的repo的话，例如docker-ce.repo，在目标机器上也要添加相应的repo文件。</p>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-关于吕先生在周会上对DRR工作指示的总结" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/968230d9.html">关于吕先生在周会上对DRR工作指示的总结</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/968230d9.html">
            <time datetime="2019-10-14T02:01:46.000Z" itemprop="datePublished">2019-10-14</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/工作/">工作</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/DRR/">DRR</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p>Welcome to my blog, enter password to read.</p>
            <p class="article-more-link">
                <a href="/archives/968230d9.html#more">查看更多</a>
            </p>
        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Mac电脑开启root账号，以及配置免密登录" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/87e7ba04.html">Mac电脑开启root账号，以及配置免密登录</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/87e7ba04.html">
            <time datetime="2019-10-14T01:13:08.000Z" itemprop="datePublished">2019-10-14</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Mac/">Mac</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <blockquote><p>最近在研究大数据分布式计算环境的配置，用到了Spark环境的配置，其中涉及到需要开启root账号和免密登录，</p>
</blockquote>
<h4 id="一、如何在-Mac-上启用-root-用户或更改-root-密码"><a href="#一、如何在-Mac-上启用-root-用户或更改-root-密码" class="headerlink" title="一、如何在 Mac 上启用 root 用户或更改 root 密码"></a>一、如何在 Mac 上启用 root 用户或更改 root 密码</h4><p>完成某些任务需要系统更多区域的访问权限，Mac 管理员可以使用 root 用户帐户来完成这些任务。</p>
<p>名为“root”的用户帐户是一个超级用户，拥有更多系统区域（包括 macOS 用户帐户中的文件）的读写权限。默认情况下，root 用户处于停用状态。如果您可以使用管理员帐户登录 Mac，您可以启用 root 用户，然后以 root 用户身份登录来完成您的任务。</p>
<p>与启用 root 用户相比，在“终端”中使用 sudo 命令更为安全。要了解 sudo，请打开“终端”应用，然后输入 man sudo。</p>
<h5 id="启用或停用-root-用户"><a href="#启用或停用-root-用户" class="headerlink" title="启用或停用 root 用户"></a>启用或停用 root 用户</h5><ol>
<li>选取苹果菜单 () &gt;“系统偏好设置”，然后点按“用户与群组”（或“帐户”）。</li>
<li>点按 锁形图标，然后输入管理员名称和密码。</li>
<li>点按“登录选项”。</li>
<li>点按“加入”（或“编辑”）。</li>
<li>点按“打开目录实用工具”。</li>
<li>点按“目录实用工具”窗口中的 锁形图标，然后输入管理员名称和密码。</li>
<li>从“目录实用工具”的菜单栏中：<ul>
<li>选取“编辑”&gt;“启用 Root 用户”，然后输入要用于 root 用户的密码。</li>
<li>或者选取“编辑”&gt;“停用 Root 用户”。</li>
</ul>
</li>
</ol>
<h5 id="以-root-用户身份登录"><a href="#以-root-用户身份登录" class="headerlink" title="以 root 用户身份登录"></a>以 root 用户身份登录</h5><p>启用 root 用户后，仅在以 root 用户身份登录时，您才拥有 root 用户的权限。</p>
<ol>
<li>选取苹果菜单 &gt;“退出登录”，以退出登录您的当前用户帐户。</li>
<li>在登录窗口中，使用用户名“root”以及为 root 用户创建的密码登录。<br>如果登录窗口显示用户列表，请点按“其他”，然后登录。</li>
</ol>
<p>完成任务后，应务必停用 root 用户。</p>
<h5 id="更改-root-密码"><a href="#更改-root-密码" class="headerlink" title="更改 root 密码"></a>更改 root 密码</h5><ol>
<li>选取苹果菜单 () &gt;“系统偏好设置”，然后点按“用户与群组”（或“帐户”）。</li>
<li>点按 锁形图标，然后输入管理员名称和密码。</li>
<li>点按“登录选项”。</li>
<li>点按“加入”（或“编辑”）。</li>
<li>点按“打开目录实用工具”。</li>
<li>点按“目录实用工具”窗口中的 锁形图标，然后输入管理员名称和密码。</li>
<li>从“目录实用工具”的菜单栏中，选取“编辑”&gt;“更改 Root 密码…”</li>
<li>在出现提示时输入 root 密码。</li>
</ol>
<h4 id="二、Mac-terminal-允许root用户通过ssh登录"><a href="#二、Mac-terminal-允许root用户通过ssh登录" class="headerlink" title="二、Mac terminal 允许root用户通过ssh登录"></a>二、Mac terminal 允许root用户通过ssh登录</h4><blockquote><p>默认情况下，Mac 的 root 用户是没有开启的，当然更不可能通过 ssh 登录了</p>
</blockquote>
<h5 id="开启-root-用户"><a href="#开启-root-用户" class="headerlink" title="开启 root 用户"></a>开启 root 用户</h5><p>见上步。</p>
<h5 id="配置-sshd-允许-root-用户登录（使用非root登录）"><a href="#配置-sshd-允许-root-用户登录（使用非root登录）" class="headerlink" title="配置 sshd 允许 root 用户登录（使用非root登录）"></a>配置 sshd 允许 root 用户登录（使用非root登录）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 1. 先进入 root 用户模式</span><br><span class="line">su</span><br><span class="line"></span><br><span class="line"># 2. 然后编辑 sshd_config 文件内容</span><br><span class="line">vi /private/etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"># 3. 找到 ‘#PermitRootLogin prohibit-password’ 这一行，把前面的 # 号去掉，并把后面改成 yes</span><br><span class="line">PermitRootLogin yes</span><br><span class="line"></span><br><span class="line"># 4. 保存并退出</span><br><span class="line">:wq!</span><br></pre></td></tr></table></figure>
<h5 id="重启-sshd-服务"><a href="#重启-sshd-服务" class="headerlink" title="重启 sshd 服务"></a>重启 sshd 服务</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">launchctl stop com.openssh.sshd     # 停止 ssh 服务</span><br><span class="line">launchctl start com.openssh.sshd    # 启动 ssh 服务</span><br></pre></td></tr></table></figure>
<h4 id="三、mac-免密ssh登陆配置不坑指南"><a href="#三、mac-免密ssh登陆配置不坑指南" class="headerlink" title="三、mac 免密ssh登陆配置不坑指南"></a>三、mac 免密ssh登陆配置不坑指南</h4><p>我们把本地机子叫做为mac，远程机子叫做ubuntu（这个ubuntu也可以是centos，debian，mac之类的）。</p>
<ol>
<li><p>生成公私钥对</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -f local_rsa -C &quot;local&quot;</span><br><span class="line"></span><br><span class="line">根据交互，输入密码，或者直接回车可以为空，生成公私钥对</span><br></pre></td></tr></table></figure>
</li>
<li><p>把共钥复制到服务器上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i [公钥文件] user@host</span><br></pre></td></tr></table></figure>
</li>
<li><p>一般别的系统到第三步就可以免密登陆了，但是mac并不这样。还要调用ssh-add。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-add -K [你的私钥文件，就是那个不加.pub结尾的文件]</span><br><span class="line">// 例如ssh-add -K id_rsa</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注意上面的shell命令都在~/.ssh目录下，中途请不要切换目录。</p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://support.apple.com/zh-cn/HT204012" target="_blank" rel="noopener">如何在 Mac 上启用 root 用户或更改 root 密码</a></li>
<li><a href="https://blog.csdn.net/KimBing/article/details/82761986" target="_blank" rel="noopener">Mac terminal 允许root用户通过ssh登录</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/32279976" target="_blank" rel="noopener">mac 免密ssh登陆配置不坑指南</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Spark学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/610bd23e.html">Spark学习笔记</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/610bd23e.html">
            <time datetime="2019-10-13T12:16:38.000Z" itemprop="datePublished">2019-10-13</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Spark/">Spark</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="搭建spark集群环境"><a href="#搭建spark集群环境" class="headerlink" title="搭建spark集群环境"></a>搭建spark集群环境</h4><ul>
<li>目  标：</li>
</ul>
<p>搭建Spark集群环境，一台做为master（192.168.1.195），2台做为slave（192.168.1.122，192.168.1.195）</p>
<ul>
<li>需要准备环境并且已经完成环境变量设置：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jdk 1.8</span><br><span class="line">scala scala-2.12.5</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="1-修改hostname和hosts文件"><a href="#1-修改hostname和hosts文件" class="headerlink" title="1. 修改hostname和hosts文件"></a>1. 修改hostname和hosts文件</h5><ul>
<li>修改hostname<br>在这两台机器上修改hostname，centos直接修改<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#vim /etc/hostname</span><br><span class="line"></span><br><span class="line">m0.unicom</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>mac电脑参照<a href="/archives/55830bef.html">Mac OS X 中 hostname 的设置</a></p>
<ul>
<li>修改hosts文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#vim /etc/hosts</span><br><span class="line"></span><br><span class="line">192.168.1.195  m0.unicom # 主节点</span><br><span class="line">192.168.1.195  s0.unicom # slave节点</span><br><span class="line">192.168.1.122  s1.unicom # slave节点</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="2-配置免密登录"><a href="#2-配置免密登录" class="headerlink" title="2. 配置免密登录"></a>2. 配置免密登录</h5><p>配置ssh就是为了能够实现免密登录，这样方便远程管理Hadoop并无需登录密码在Hadoop集群上共享文件资源，并且可以方便spark能方便的管理worker slave。</p>
<p>可以参照我的这篇文章 <a href="/archives/87e7ba04.html">Mac电脑开启root账号，以及配置免密登录</a></p>
<h5 id="3-下载安装hadoop"><a href="#3-下载安装hadoop" class="headerlink" title="3 下载安装hadoop"></a>3 下载安装hadoop</h5><p>在master节点安装hadoop，配置环境变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_HOME=/Users/daren/devtool/hadoop-3.0.0</span><br><span class="line">export HADOOP_HOME_WARN_SUPPRESS=1</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin</span><br></pre></td></tr></table></figure></p>
<p>3.1 配置hdfs地址和端口<br>进入hadoop目录/Users/daren/devtool/hadoop-3.0.0/etc/hadoop,修改core-site.xml内容为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">     &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">     &lt;value&gt;/Users/daren/devtool/hadoop-3.0.0/hadoop_data/temp&lt;/value&gt;</span><br><span class="line">     &lt;description&gt;A base for other temporary directories.&lt;/description&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property&gt;</span><br><span class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hdfs://m0.unicom:9000&lt;/value&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;io.file.buffer.size&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;131072&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;fs.hdfs.impl.disable.cache&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;io.compression.codecs&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;</span><br><span class="line">             org.apache.hadoop.io.compress.GzipCodec,</span><br><span class="line">             org.apache.hadoop.io.compress.DefaultCodec,</span><br><span class="line">             org.apache.hadoop.io.compress.BZip2Codec,</span><br><span class="line">             org.apache.hadoop.io.compress.SnappyCodec</span><br><span class="line">        &lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<p>3.2 修改mapred-site.xml 内容为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">         &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">         &lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">         &lt;name&gt;mapred.hosts.exclude&lt;/name&gt;</span><br><span class="line">         &lt;value&gt;/usr/unidata/hadoop/etc/hadoop/excludes&lt;/value&gt;</span><br><span class="line">         &lt;final&gt;true&lt;/final&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<p>3.3 修改hdfs-site.xml为如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;1&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">	&lt;property&gt;</span><br><span class="line">		&lt;name&gt;dfs.permissions&lt;/name&gt;</span><br><span class="line">		&lt;value&gt;false&lt;/value&gt;    &lt;!--关闭防火墙--&gt;</span><br><span class="line">	&lt;/property&gt;</span><br><span class="line">	&lt;property&gt;  </span><br><span class="line">    &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;  </span><br><span class="line">    &lt;value&gt;file:///Users/daren/devtool/hadoop-3.0.0/hadoop_data/name&lt;/value&gt;  </span><br><span class="line"> &lt;/property&gt;  </span><br><span class="line"> &lt;property&gt;  </span><br><span class="line">     &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;  </span><br><span class="line">     &lt;value&gt;file:///Users/daren/devtool/hadoop-3.0.0/hadoop_data/data&lt;/value&gt;</span><br><span class="line"> &lt;/property&gt;  </span><br><span class="line"> &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.balance.bandwidthPerSec&lt;/name&gt;</span><br><span class="line">            &lt;value&gt;10485760&lt;/value&gt;</span><br><span class="line">            &lt;description&gt;Specifies the maximum bandwidth that each datanode can utilize for the balancing purpose in term of the number of bytes per second. &lt;/description&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.http.address&lt;/name&gt;</span><br><span class="line">            &lt;value&gt;m0.unicom:50070&lt;/value&gt;</span><br><span class="line">            &lt;description&gt;Secondary get fsimage and edits via dfs.http.address&lt;/description&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">           &lt;value&gt;m0.unicom:50090&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line"> &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.namenode.checkpoint.dir&lt;/name&gt;</span><br><span class="line">            &lt;value&gt;file:/usr/unidata/hadoop/tmp/namesecondary&lt;/value&gt;</span><br><span class="line">            &lt;description&gt;Determines where on the local filesystem the DFS secondary</span><br><span class="line">                 name node should store the temporary images to merge.</span><br><span class="line">                 If this is a comma-delimited list of directories then the image is</span><br><span class="line">                 replicated in all of the directories for redundancy.</span><br><span class="line">            &lt;/description&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.namenode.checkpoint.edits.dir&lt;/name&gt;</span><br><span class="line">            &lt;value&gt;file:/usr/unidata/hadoop/tmp/namesecondary&lt;/value&gt;</span><br><span class="line">            &lt;description&gt;Determines where on the local filesystem the DFS secondary</span><br><span class="line">                name node should store the temporary edits to merge.</span><br><span class="line">                If this is a comma-delimited list of directories then the edits is</span><br><span class="line">                replicated in all of the directories for redundancy.</span><br><span class="line">                Default value is same as dfs.namenode.checkpoint.dir</span><br><span class="line">            &lt;/description&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.namenode.checkpoint.period&lt;/name&gt;</span><br><span class="line">            &lt;value&gt;3600&lt;/value&gt;</span><br><span class="line">            &lt;description&gt;The number of seconds between two periodic checkpoints.</span><br><span class="line">           &lt;/description&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property&gt;</span><br><span class="line">            &lt;name&gt;dfs.hosts.exclude&lt;/name&gt;</span><br><span class="line">            &lt;value&gt;/usr/unidata/hadoop/etc/hadoop/excludes&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<p>3.4 格式化HDFS</p>
<p>这个操作相当于一个文件系统的初始化，执行命令hdfs namenode -format</p>
<p>3.5 启动关闭Hadoop服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./start-dfs.sh          </span><br><span class="line">./stop-dfs.sh</span><br></pre></td></tr></table></figure></p>
<p>3.6 验证hadoop是否启动成功</p>
<ul>
<li>在master，slave01，slave02上输入jps，验证相关进程是否启动</li>
<li>启动成功后，我们在浏览器中输入<a href="http://localhost:50070可以看到" target="_blank" rel="noopener">http://localhost:50070可以看到</a></li>
</ul>
<h5 id="4-下载安装Spark"><a href="#4-下载安装Spark" class="headerlink" title="4 下载安装Spark"></a>4 下载安装Spark</h5><p>去官网下载相应版本的spark，注意scala版本<br>下载地址 <a href="https://spark.apache.org/downloads.html" target="_blank" rel="noopener">https://spark.apache.org/downloads.html</a><br>4.1 配置环境变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#创建软连接</span><br><span class="line">ln -s /Users/daren/devtool/spark-2.4.4-bin-hadoop2.7 spark</span><br><span class="line"></span><br><span class="line">#设置环境变量</span><br><span class="line">export SPARK_HOME=/Users/daren/devtool/spark</span><br><span class="line">export PATH=$PATH:$SPARK_HOME/bin</span><br></pre></td></tr></table></figure></p>
<p>4.2 配置spark-env.sh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/Users/daren/devtool/hadoop-3.0.0/lib/native</span><br><span class="line"></span><br><span class="line">export SPARK_HISTORY_OPTS=&quot;-Dspark.history.ui.port=18080 -Dspark.history.retainedApplications=30 -Dspark.history.fs.logDirectory=hdfs://localhost:9000/history&quot;</span><br><span class="line">#export SPARK_DAEMON_JAVA_OPTS=&quot;-Dspark.deploy.recoveryMode=ZOOKEEPER -Dspark.deploy.zookeeper.url=m0.unidata:2181,m1.unidata:2181,s0.unidata:2181,s1.unidata:2181,s2.unidata:2181 -Dspark.deploy.zookeeper.dir=/spark&quot;</span><br><span class="line">export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</span><br><span class="line">export SCALA_HOME=/Users/daren/devtool/scala</span><br><span class="line">export SPARK_MASTER_IP=s0.unicom</span><br><span class="line">export SPARK_MASTER_PORT=7077</span><br><span class="line">export SPARK_WORKER_CORES=2</span><br><span class="line">export SPARK_WORKER_MEMORY=4g</span><br><span class="line">export HADOOP_CONF_DIR=/Users/daren/devtool/hadoop-3.0.0/etc/hadoop</span><br><span class="line">export SPARK_CLASSPATH=$SPARK_CLASSPATH</span><br><span class="line">#export SPARK_EXECUTOR_MEMORY=1G</span><br><span class="line">#export SPARK_DRIVER_MEMORY=2G</span><br></pre></td></tr></table></figure></p>
<p>4.3 配置slaves<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s0.unicom</span><br><span class="line">#s1.unicom</span><br></pre></td></tr></table></figure></p>
<p>4.4 启动spark<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./start-all.sh</span><br></pre></td></tr></table></figure></p>
<p>在浏览器查看spark工作 <a href="http://192.168.1.195:8080/" target="_blank" rel="noopener">http://192.168.1.195:8080/</a></p>
<h4 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h4><ul>
<li>问题1: <font color="red">Spark集群，通过master节点执行start-all.sh启动slave报错</font><br>如下错误<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">starting org.apache.spark.deploy.master.Master, logging to /Users/daren/devtool/spark/logs/spark-daren-org.apache.spark.deploy.master.Master-1-m0.unicom.out</span><br><span class="line">s1.unicom: bash: 第 0 行:cd: /Users/daren/devtool/spark: 没有那个文件或目录</span><br><span class="line">s1.unicom: bash: /Users/daren/devtool/spark/sbin/start-slave.sh: 没有那个文件或目录</span><br><span class="line">s0.unicom: starting org.apache.spark.deploy.worker.Worker, logging to /Users/daren/devtool/spark/logs/spark-daren-org.apache.spark.deploy.worker.Worker-1-m0.unicom.out</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>主要原因是想在master节点上启动所有的节点，而spark集群中需要各个节点中的spark home 的路径和master上spark home节点的路径必须一样，这样在slave节点中就找不到相应的spark home路径，所以报错了。</p>
<p>关键点：路径找不到，是192.168.1.122报的。因为master机器只配了各slave的ip，并不知道他们的spark安装路径，所以我猜测master是按本机的路径去调，但可惜spark在另外两台的目录和master并不一样，因此就找不到指定的路径了。</p>
<p>解决方法两种，第一种是将所有slave机器的spark路径改成和master一致，便可解决，第二种是单独启动master和slave节点</p>
<p>我这里采用第二种方法：<br>启动master节点，进入master spark home路径下的sbin目录中，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./start-master.sh -h 192.168.3.207(master ip) --host 192.168.3.207(master ip)</span><br></pre></td></tr></table></figure></p>
<p>启动slave节点，进入slave spark home路径下的sbin目录中，执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./start-slave.sh spark://192.168.3.207(master ip):7077</span><br></pre></td></tr></table></figure></p>
<ul>
<li>问题2: <font color="red">master节点用户非root用户，slave节点用root节点，如何解决免密登录问题</font></li>
</ul>
<p>原因分析：在本地开发环境想要搭建spark集群，我本地电脑用的是mac电脑作为master节点，没开启root账号，用的是“daren”账号，而slave（s1.unicom）节点用的是root账号，在开启了免密登录之后使用start-all.sh启动spark集群的时候，显示一直无法登录，报权限失败，无法登录，发现是ssh登录的时候，使用的时候/etc/hosts中配置的地址就行登录的，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.195  m0.unicom</span><br><span class="line">192.168.1.195  s0.unicom</span><br><span class="line">192.168.1.122  s1.unicom</span><br></pre></td></tr></table></figure></p>
<p>当通过<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh s1.unicom</span><br></pre></td></tr></table></figure></p>
<p>登录的时候，其实想当于<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh daren@192.168.1.122</span><br></pre></td></tr></table></figure></p>
<p>而对于slave节点来说，是不存在daren用户的，所以我们需要修改ssh登录使用的用户名，刚开始以为可以在spark-env中进行配置，最后发现修改ssh config就可以，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/config</span><br><span class="line">Host s1.unicom</span><br><span class="line">    HostName 192.168.1.122</span><br><span class="line">    User root</span><br><span class="line">    IdentityFile ~/.ssh/122_rsa</span><br></pre></td></tr></table></figure></p>
<p>这样我们在使用ssh s1.unicom登录的时候会修改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.1.122</span><br></pre></td></tr></table></figure></p>
<p>这样就满足了我们的需要。</p>
<h4 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h4><p><a href="https://www.4spaces.org/spark-map-flatmap/" target="_blank" rel="noopener">Spark中map和flatMap的区别详解</a><br><a href="https://www.cnblogs.com/sharpxiajun/p/5506822.html" target="_blank" rel="noopener">Spark笔记：RDD基本操作（上）</a><br><a href="https://www.cnblogs.com/sharpxiajun/p/5510215.html" target="_blank" rel="noopener">Spark笔记：RDD基本操作（下）</a></p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://serversforhackers.com/c/ssh-tricks" target="_blank" rel="noopener">SSH Tricks</a></li>
<li><a href="https://daemon369.github.io/ssh/2015/03/21/using-ssh-config-file" target="_blank" rel="noopener">使用 SSH config 文件</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Mac-OS-X-中-hostname-的设置" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/55830bef.html">Mac OS X 中 hostname 的设置</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/55830bef.html">
            <time datetime="2019-10-11T13:50:05.000Z" itemprop="datePublished">2019-10-11</time>
        </a>
    </div>


                        
                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>查看系统 hostname 设置<br>使用命令行工具 hostname 可以查看系统 hostname 设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hostname</span><br></pre></td></tr></table></figure>
<p>它的值会按优先级依次取决于下列值：</p>
<ul>
<li>hostname 命令设置的值</li>
<li>HostName 属性值</li>
<li>LocalHostName 属性值（通常系统都会设置此属性）<br>关于 hostname 相关属性，scutil 命令手册（info scutil 或 man scutil）中有如下描述：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ComputerName   The user-friendly name for the system.</span><br><span class="line"></span><br><span class="line">LocalHostName  The local (Bonjour) host name.</span><br><span class="line"></span><br><span class="line">HostName       The name associated with hostname(1) and</span><br><span class="line">                         gethostname(3).</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>设置 hostname<br>有三种方式设置 hostname：</p>
<ul>
<li>System Preferences</li>
<li>命令行工具 hostname</li>
<li>命令行工具 scutil</li>
</ul>
<h4 id="System-Preferences"><a href="#System-Preferences" class="headerlink" title="System Preferences"></a>System Preferences</h4><p>设置方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System Preferences -&gt; Sharing</span><br></pre></td></tr></table></figure></p>
<p>在这里可以查看和设置 ComputerName 和 LocalHostName，但不能设置 HostName 的值。</p>
<p>对于普通用户通常使用这种方式就可以了，因为通常情况下都没有用 hostname 和 scutil 来设置，所以就会取 LocalHostName 的值。</p>
<h4 id="命令行工具-hostname"><a href="#命令行工具-hostname" class="headerlink" title="命令行工具 hostname"></a>命令行工具 hostname</h4><p>设置当前系统的 hostname 为 MyMac：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hostname MyMac</span><br></pre></td></tr></table></figure>
<p>注意：这种方式不能保持到重启后</p>
<p>根据 hostname 命令的手册（info hostname 或 man hostname），可以使用 scutil 命令来持久修改 hostname</p>
<h4 id="命令行工具-scutil"><a href="#命令行工具-scutil" class="headerlink" title="命令行工具 scutil"></a>命令行工具 scutil</h4><p>查看各属性值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo scutil --get ComputerName</span><br><span class="line">Yanke&apos;s MBP</span><br><span class="line">$ sudo scutil --get LocalHostName</span><br><span class="line">Yankes-MBP</span><br><span class="line">$ sudo scutil --get HostName</span><br><span class="line">HostName: not set</span><br></pre></td></tr></table></figure></p>
<p>设置 HostName 属性值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scutil --set HostName MyMac</span><br></pre></td></tr></table></figure></p>
<p>scutil 可以修改 ComputerName，LocalHostName 和 HostName 任意一个值。</p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="http://yacca.github.io/2013/08/13/hostname-in-mac-osx.html" target="_blank" rel="noopener">Mac OS X 中 hostname 的设置</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-ssh-keygen-基本用法" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/d82d84.html">SSH无密码登录</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/d82d84.html">
            <time datetime="2019-09-16T08:47:26.000Z" itemprop="datePublished">2019-09-16</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/ssh/">ssh</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>ssh 公钥认证是ssh认证的方式之一。通过公钥认证可实现ssh免密码登陆，git的ssh方式也是通过公钥进行认证的。</p>
<p>在用户目录的home目录下，有一个.ssh的目录，和当前用户ssh配置认证相关的文件，几乎都在这个目录下。</p>
<p>ssh-keygen 可用来生成ssh公钥认证所需的公钥和私钥文件。</p>
<blockquote><p>使用 ssh-keygen 时，请先进入到 ~/.ssh 目录，不存在的话，请先创建。</p>
</blockquote>
<h4 id="生成ssh公钥"><a href="#生成ssh公钥" class="headerlink" title="生成ssh公钥"></a>生成ssh公钥</h4><p>使用 ssh-kengen 会在~/.ssh/目录下生成两个文件，不指定文件名和密钥类型的时候，默认生成的两个文件是：</p>
<ul>
<li>id_rsa</li>
<li>id_rsa.pub<br>第一个是私钥文件，第二个是公钥文件。</li>
</ul>
<p>生成ssh key的时候，可以通过 -f 选项指定生成文件的文件名，如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -f vultr_rsa -C &quot;vultr服务器&quot;</span><br><span class="line"></span><br><span class="line">其中：vultr_rsa 是文件名   vultr服务器是备注和客户端标示</span><br></pre></td></tr></table></figure></p>
<h4 id="配置公钥到服务器"><a href="#配置公钥到服务器" class="headerlink" title="配置公钥到服务器"></a>配置公钥到服务器</h4><p>将公钥内容添加到服务器的~/.ssh/authorized_keys 文件中.</p>
<h4 id="alias-实现命令快速登陆"><a href="#alias-实现命令快速登陆" class="headerlink" title="alias 实现命令快速登陆"></a>alias 实现命令快速登陆</h4><p>做好配置之后，通过ssh可以直接登录了。对经常登录的服务器，可以将ssh登录命令的alias加到 ~/.bash_profile文件中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias to-ini=&apos;ssh root@11.1.1.1&apos;</span><br></pre></td></tr></table></figure></p>
<p>登录的时候:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">to-ini</span><br></pre></td></tr></table></figure></p>
<h4 id="ssh-copy-id"><a href="#ssh-copy-id" class="headerlink" title="ssh-copy-id"></a>ssh-copy-id</h4><p>ssh-copy-id 是一个小脚本，你可以用这个小脚本完成以上工作。这个脚本在linux系统上一般都有。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i .ssh/id_rsa.pub  root@192.168.x.xxx</span><br></pre></td></tr></table></figure></p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://www.liaohuqiu.net/cn/posts/ssh-public-key-auto-login/" target="_blank" rel="noopener">ssh public key认证免密码登录</a></li>
<li><a href="https://www.liaohuqiu.net/cn/posts/ssh-keygen-abc/" target="_blank" rel="noopener">ssh-keygen 基本用法</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Centos下ftp客户端lftp的使用" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/16634faa.html">Centos下ftp客户端lftp的使用</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/16634faa.html">
            <time datetime="2019-09-16T02:30:17.000Z" itemprop="datePublished">2019-09-16</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/lftp/">lftp</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install lftp</span><br></pre></td></tr></table></figure>
<h4 id="使用语法"><a href="#使用语法" class="headerlink" title="使用语法"></a>使用语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lftp -[fceup] user:passwd@host #passwd可选,此方式密码明文保存,history可查看</span><br><span class="line"></span><br><span class="line">-f &lt;file&gt;           #执行文件中的命令后退出</span><br><span class="line"></span><br><span class="line">-c &lt;cmd&gt;        #执行命令后退出</span><br><span class="line"></span><br><span class="line">-e &lt;cmd&gt;         #登录后后执行命令</span><br><span class="line"></span><br><span class="line">-u &lt;user&gt;[,&lt;pass&gt;]  #使用指定的用户名/口令进行验证</span><br><span class="line"></span><br><span class="line">-p &lt;port&gt;           #连接指定的端口，默认21</span><br></pre></td></tr></table></figure>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">cd</span><br><span class="line">#切换FTP目录</span><br><span class="line"></span><br><span class="line">lcd #切换本地目录</span><br><span class="line"></span><br><span class="line">ls</span><br><span class="line">#列出FTP目录文件</span><br><span class="line"></span><br><span class="line">!ls</span><br><span class="line">#列出本地目录文件</span><br><span class="line"></span><br><span class="line">find</span><br><span class="line">./ -name file</span><br><span class="line">#查找文件</span><br><span class="line"></span><br><span class="line">mv</span><br><span class="line">#移动</span><br><span class="line"></span><br><span class="line">rm</span><br><span class="line">#删除</span><br><span class="line"></span><br><span class="line">mkdir</span><br><span class="line">#新建目录</span><br><span class="line"></span><br><span class="line">rmdir</span><br><span class="line">#删除目录</span><br></pre></td></tr></table></figure>
<h4 id="上传下载文件"><a href="#上传下载文件" class="headerlink" title="上传下载文件"></a>上传下载文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">get [cEaO] file</span><br><span class="line">-o newfilename #下载文件</span><br><span class="line"></span><br><span class="line">put [cEaO] file</span><br><span class="line">-o newfilename #上传文件</span><br><span class="line"></span><br><span class="line">pget -n #多线程下载</span><br><span class="line"></span><br><span class="line">可选参数：</span><br><span class="line"></span><br><span class="line">-c #支持断点续传</span><br><span class="line"></span><br><span class="line">-E #下载后删除远端文件</span><br><span class="line"></span><br><span class="line">-a #指定传输为ascii模式, 默认为二进制模式</span><br><span class="line"></span><br><span class="line">-O #指定存放目录</span><br></pre></td></tr></table></figure>
<h4 id="上传下载目录"><a href="#上传下载目录" class="headerlink" title="上传下载目录"></a>上传下载目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mirror [cRnr] remote [local]</span><br><span class="line"></span><br><span class="line">可选参数：</span><br><span class="line"></span><br><span class="line">-c #支持断点续传</span><br><span class="line"></span><br><span class="line">-R #上传整个目录</span><br><span class="line"></span><br><span class="line">-n #只下载较新的档案，可用于增量备份</span><br><span class="line"></span><br><span class="line">-r  #只下载当前目录，不递归目录</span><br></pre></td></tr></table></figure>
<h4 id="主动-被动模式"><a href="#主动-被动模式" class="headerlink" title="主动/被动模式"></a>主动/被动模式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#默认为被动模式</span><br><span class="line"></span><br><span class="line">set</span><br><span class="line">ftp:passive-mode no #关闭被动模式转为主动模式</span><br><span class="line"></span><br><span class="line">#主动客户端开启数据传输端口，被动服务端开启数据传输端口。</span><br></pre></td></tr></table></figure>
<h4 id="妙用lftp多线程下载"><a href="#妙用lftp多线程下载" class="headerlink" title="妙用lftp多线程下载"></a>妙用lftp多线程下载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lftp -c &quot;pget -n 10 http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.18.tar.gz&quot;</span><br></pre></td></tr></table></figure>
<h4 id="使用例子"><a href="#使用例子" class="headerlink" title="使用例子"></a>使用例子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lftp -u username,password -p 21 -e &quot;mirror --only-newer --delete lydj /data/file/;quit;&quot; ftpadmin@ip</span><br><span class="line">从文件服务器lydj目录中递归下载文件到本地/data/file目录中，并且只下载最新的，对于服务器不存在的问题在本地也删除。</span><br></pre></td></tr></table></figure>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://lftp.yar.ru/lftp-man.html" target="_blank" rel="noopener">lftp使用手册</a></li>
<li><a href="https://blog.csdn.net/dl425134845/article/details/42261709" target="_blank" rel="noopener">Linux/Centos下ftp客户端lftp使用</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Nginx-增加SSL认证之后，request-getScheme-获取不到https的问题记录" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/e0e8ec60.html">Nginx 增加SSL认证之后，request.getScheme()获取不到https的问题记录</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/e0e8ec60.html">
            <time datetime="2019-09-12T08:36:49.000Z" itemprop="datePublished">2019-09-12</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Nginx/">Nginx</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Https/">Https</a>, <a class="tag-link" href="/tags/Nginx/">Nginx</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><h4 id="Nginx-Tomcat-部署-request-getScheme获取不到Https问题"><a href="#Nginx-Tomcat-部署-request-getScheme获取不到Https问题" class="headerlink" title="Nginx+Tomcat 部署 request.getScheme获取不到Https问题"></a>Nginx+Tomcat 部署 request.getScheme获取不到Https问题</h4><p>通过浏览器输入<a href="https://www.xxx.com，request.getScheme()获取到的确实http而不是https" target="_blank" rel="noopener">https://www.xxx.com，request.getScheme()获取到的确实http而不是https</a>.<br>通过request.getRequestURL()拿到的也是<a href="http://www.xxx.com" target="_blank" rel="noopener">http://www.xxx.com</a><br>分析原因，是因为用<font color="red">nginx+tomcat部署web服务，tomcat接受到的请求都是来自于nginx的http请求</font>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">request.getScheme()  //总是 http，而不是实际的http或https  </span><br><span class="line">request.isSecure()  //总是false（因为总是http）  </span><br><span class="line">request.getRemoteAddr()  //总是 nginx 请求的 IP，而不是用户的IP  </span><br><span class="line">request.getRequestURL()  //总是 nginx 请求的URL 而不是用户实际请求的 URL  </span><br><span class="line">response.sendRedirect( 相对url )  //总是重定向到 http 上 （因为认为当前是 http 请求）</span><br></pre></td></tr></table></figure>
<h4 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h4></p>
            <p class="article-more-link">
                <a href="/archives/e0e8ec60.html#more">查看更多</a>
            </p>
        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-centos-7下iptables-的安装和使用" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/3aac26d6.html">centos 7下iptables 的安装和使用</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/3aac26d6.html">
            <time datetime="2019-09-12T05:47:41.000Z" itemprop="datePublished">2019-09-12</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/iptables/">iptables</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><blockquote><p>说明：Centos 7 默认的防火墙是 firewall ，鉴于 iptables 使用的比较广，本文简要介绍在 CentOS7.0 系统下 iptables 服务的安装以及相关的使用方法。</p>
</blockquote>
<h4 id="关闭-firewall"><a href="#关闭-firewall" class="headerlink" title="关闭 firewall"></a>关闭 firewall</h4><p>为了防止与 iptables 服务冲突，先禁用 firewall 开机启动使用systemctl status firewalld<br>查看服务状态，active/inactive表明服务是运行/关闭状态（如下图）</p>
<ul>
<li><p>查看firewalld状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭fiewwalld</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure>
</li>
<li><p>禁止开机启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="安装-iptables"><a href="#安装-iptables" class="headerlink" title="安装 iptables"></a>安装 iptables</h4></p>
            <p class="article-more-link">
                <a href="/archives/3aac26d6.html#more">查看更多</a>
            </p>
        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/d7fe6232.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/archives/d7fe6232.html" class="title">检查网站的TLS版本</a></p>
                            <p class="item-date"><time datetime="2021-08-12T08:14:20.000Z" itemprop="datePublished">2021-08-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/d4a32458.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a></p>
                            <p class="item-title"><a href="/archives/d4a32458.html" class="title">Scrapy中Request()、FormRequest()、FormRequest.from_response()的小结</a></p>
                            <p class="item-date"><time datetime="2021-07-16T06:18:05.000Z" itemprop="datePublished">2021-07-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/847c0e37.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a></p>
                            <p class="item-title"><a href="/archives/847c0e37.html" class="title">Docker修改Docker0网桥默认网段</a></p>
                            <p class="item-date"><time datetime="2021-06-16T23:37:14.000Z" itemprop="datePublished">2021-06-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/37827dce.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/开发效率/">开发效率</a></p>
                            <p class="item-title"><a href="/archives/37827dce.html" class="title">xpath获取内容的方式</a></p>
                            <p class="item-date"><time datetime="2021-06-10T01:49:33.000Z" itemprop="datePublished">2021-06-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/7e323156.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/开发效率/">开发效率</a></p>
                            <p class="item-title"><a href="/archives/7e323156.html" class="title">SwitchHosts动态切换host文件</a></p>
                            <p class="item-date"><time datetime="2021-05-20T06:42:29.000Z" itemprop="datePublished">2021-05-20</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Gitlab/">Gitlab</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/优秀文章/">优秀文章</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/区块链/">区块链</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作/">工作</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发效率/">开发效率</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/">技术开发</a><span class="category-list-count">51</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Android/">Android</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/CI/">CI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/GFW/">GFW</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/HEXO/">HEXO</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/J2EE/">J2EE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/LINUX/">LINUX</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Map/">Map</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/NGINX/">NGINX</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Nginx/">Nginx</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Python/">Python</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/SQLMAP/">SQLMAP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/WeChat/">WeChat</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/分布式/">分布式</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/博客/">博客</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/地图/">地图</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/工具箱/">工具箱</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/开发工具/">开发工具</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><span class="category-list-count">4</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-P/">Android P</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-Studio/">Android Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Atom/">Atom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BURP/">BURP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Baidu-Map/">Baidu Map</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI/">CI</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos/">Centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/">Cookie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cros/">Cros</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DRR/">DRR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FastDFS/">FastDFS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GeoHash/">GeoHash</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitlab/">Gitlab</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HEXO/">HEXO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/">HTTPS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Https/">Https</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICARUS/">ICARUS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log/">Log</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NGINX/">NGINX</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nas/">Nas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pandas/">Pandas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/">RecyclerView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLMAP/">SQLMAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSL/">SSL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSL-Pinning/">SSL Pinning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrapy/">Scrapy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark/">Spark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StackBlur/">StackBlur</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SwitchHosts/">SwitchHosts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VLookup/">VLookup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VPS/">VPS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webview-Video-FullScreen/">Webview Video FullScreen</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Window/">Window</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fdisk/">fdisk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/">idea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/">iptables</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lftp/">lftp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mount/">mount</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyenv/">pyenv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubntu/">ubntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/任正非/">任正非</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/华为/">华为</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/屏幕适配/">屏幕适配</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信公众号/">微信公众号</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/新时代e支部/">新时代e支部</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/毛玻璃/">毛玻璃</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/科学上网/">科学上网</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动化/">自动化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/隧道/">隧道</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Android/" style="font-size: 16.67px;">Android</a> <a href="/tags/Android-P/" style="font-size: 10px;">Android P</a> <a href="/tags/Android-Studio/" style="font-size: 10px;">Android Studio</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/BURP/" style="font-size: 10px;">BURP</a> <a href="/tags/Baidu-Map/" style="font-size: 10px;">Baidu Map</a> <a href="/tags/CI/" style="font-size: 13.33px;">CI</a> <a href="/tags/Centos/" style="font-size: 10px;">Centos</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/Cros/" style="font-size: 10px;">Cros</a> <a href="/tags/DRR/" style="font-size: 10px;">DRR</a> <a href="/tags/Docker/" style="font-size: 13.33px;">Docker</a> <a href="/tags/FastDFS/" style="font-size: 10px;">FastDFS</a> <a href="/tags/GeoHash/" style="font-size: 13.33px;">GeoHash</a> <a href="/tags/Gitlab/" style="font-size: 13.33px;">Gitlab</a> <a href="/tags/HEXO/" style="font-size: 10px;">HEXO</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hexo/" style="font-size: 13.33px;">Hexo</a> <a href="/tags/Https/" style="font-size: 10px;">Https</a> <a href="/tags/ICARUS/" style="font-size: 10px;">ICARUS</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Log/" style="font-size: 10px;">Log</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/NGINX/" style="font-size: 10px;">NGINX</a> <a href="/tags/Nas/" style="font-size: 10px;">Nas</a> <a href="/tags/Nginx/" style="font-size: 20px;">Nginx</a> <a href="/tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/RecyclerView/" style="font-size: 10px;">RecyclerView</a> <a href="/tags/SQLMAP/" style="font-size: 10px;">SQLMAP</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SSL/" style="font-size: 10px;">SSL</a> <a href="/tags/SSL-Pinning/" style="font-size: 10px;">SSL Pinning</a> <a href="/tags/Scrapy/" style="font-size: 10px;">Scrapy</a> <a href="/tags/Spark/" style="font-size: 10px;">Spark</a> <a href="/tags/StackBlur/" style="font-size: 10px;">StackBlur</a> <a href="/tags/SwitchHosts/" style="font-size: 10px;">SwitchHosts</a> <a href="/tags/VLookup/" style="font-size: 10px;">VLookup</a> <a href="/tags/VPS/" style="font-size: 13.33px;">VPS</a> <a href="/tags/Webview-Video-FullScreen/" style="font-size: 10px;">Webview Video FullScreen</a> <a href="/tags/Window/" style="font-size: 10px;">Window</a> <a href="/tags/fdisk/" style="font-size: 10px;">fdisk</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/lftp/" style="font-size: 10px;">lftp</a> <a href="/tags/mount/" style="font-size: 10px;">mount</a> <a href="/tags/pyenv/" style="font-size: 10px;">pyenv</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/ubntu/" style="font-size: 10px;">ubntu</a> <a href="/tags/任正非/" style="font-size: 10px;">任正非</a> <a href="/tags/华为/" style="font-size: 10px;">华为</a> <a href="/tags/屏幕适配/" style="font-size: 10px;">屏幕适配</a> <a href="/tags/微信公众号/" style="font-size: 10px;">微信公众号</a> <a href="/tags/新时代e支部/" style="font-size: 10px;">新时代e支部</a> <a href="/tags/毛玻璃/" style="font-size: 10px;">毛玻璃</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/科学上网/" style="font-size: 10px;">科学上网</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/隧道/" style="font-size: 10px;">隧道</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io" target="_blank">Hexo</a>
                    </li>
                
                    <li>
                        <a href="http://www.jldaren.com" target="_blank">达仁科技</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
            <!-- 
             -->
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2021 ini<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
   <script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.6/dist/Valine.min.js"></script>

    <script>
        new Valine({
            el: '#valine-thread' ,
            notify:true,
            verify:false,
            app_id: '3RK5nvSxoKincwMiCVLCMFh1-gzGzoHsz',
            app_key: 'MD8jv5EFuHcMxEP2mz5CUbA0',
            placeholder: 'Just Do It'
        });
    </script>





    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
