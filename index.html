<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>ini&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="不要听一个人说什么，而看他怎么做。">
<meta property="og:type" content="website">
<meta property="og:title" content="ini&#39;s Blog">
<meta property="og:url" content="http://inicb.com/index.html">
<meta property="og:site_name" content="ini&#39;s Blog">
<meta property="og:description" content="不要听一个人说什么，而看他怎么做。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ini&#39;s Blog">
<meta name="twitter:description" content="不要听一个人说什么，而看他怎么做。">
    

    
        <link rel="alternate" href="/" title="ini&#39;s Blog" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">ini&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <!-- <button type="submit" class="search-form-submit"></button> -->
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>

        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">ini</h2>
            <h3 id="title">Android Developer &amp; Ios Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Jilin , China</span>
            <a id="follow" target="_blank" href="https://github.com/jianlei/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                46
                <span>文章</span>
            </div>
            <div class="article-info-block">
                39
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/jianlei" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            
            <section id="main">
    <article id="post-RecyclerView根据内容多少动态设置高度" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            
	
		<a href="/archives/ed7c431b.html" itemprop="url">
            <img src="https://images.pexels.com/photos/1209658/pexels-photo-1209658.jpeg?cs=srgb&dl=backlit-blurred-background-close-up-1209658.jpg&fm=jpg" class="article-banner" />
        </a>
	



        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/ed7c431b.html">RecyclerView根据内容多少动态设置高度</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/ed7c431b.html">
            <time datetime="2019-01-11T05:58:36.000Z" itemprop="datePublished">2019-01-11</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/RecyclerView/">RecyclerView</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>在项目开发中我们经常会遇到需要RecyclerView和ScrollViewq嵌套的情况，一般我们都需要把RecyclerView中的内容全部显示，然后设置RV的高度为所有内容的高度+RV Padding+item 之间的Divider。<br>原理很简单，实现起来也很简单。</p>
<ul>
<li><p>创建RV ViewHolder</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public abstract class  MyViewHolder extends RecyclerView.ViewHolder &#123;</span><br><span class="line"></span><br><span class="line">    TextView tv_item;</span><br><span class="line">    ImageView img_delete_item;</span><br><span class="line"></span><br><span class="line">    public MyViewHolder(View itemView) &#123;</span><br><span class="line">        super(itemView);</span><br><span class="line">        tv_item = (TextView) itemView.findViewById(R.id.tv_single);</span><br><span class="line">        img_delete_item = (ImageView) itemView.findViewById(R.id.img_toprecycle_delete);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public abstract void setFixedHeight();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现自定义VH</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public MyViewHolder onCreateViewHolder(final ViewGroup parent, int viewType) &#123;</span><br><span class="line">        View view = mInflater.inflate(R.layout.item_useview, parent, false);</span><br><span class="line">        MyViewHolder viewHolder = new MyViewHolder(view)&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void setFixedHeight() &#123;</span><br><span class="line">                //  magic happening here</span><br><span class="line">                ViewGroup.LayoutParams parentParams = parent.getLayoutParams();</span><br><span class="line">                parentParams.height =</span><br><span class="line">                        ((RecyclerView) parent).computeVerticalScrollRange()</span><br><span class="line">                                + parent.getPaddingTop()</span><br><span class="line">                                + parent.getPaddingBottom();</span><br><span class="line">                parent.setLayoutParams(parentParams);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        return viewHolder;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置RV高度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//绑定viewholder</span><br><span class="line"> public void onBindViewHolder(MyViewHolder holder, final int position) &#123;</span><br><span class="line">     holder.setFixedHeight();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Android-P使用私有API弹出warning" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/f2a632a2.html">Android P使用私有API弹出warning(转载)</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/f2a632a2.html">
            <time datetime="2018-12-29T07:21:32.000Z" itemprop="datePublished">2018-12-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Android-P/">Android P</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>转自：<a href="https://huangyu.github.io/archives/35fd3a81.html" target="_blank" rel="noopener">https://huangyu.github.io/archives/35fd3a81.html</a></p>
<p>最近手头的Mix2s接收到MIUI官方开发版的推送，可以升级为Android P，很开心，然后升级后，部分应用就打不开或者挂了，比如某奇艺（买了VIP看剧都看不了，强烈吐槽）。<br>于是顺手检查了一下公司的应用，发现都能正常启动和使用，但是最近在做SDK的接入Demo，一打开发现弹出了warning对话框<br><img src="https://huangyu.github.io/archives/35fd3a81/warning.png" alt=""></p>
<p>起初以为是targetAPI的问题，升级到28问题依旧，于是Google了一下，发现是从Android P开始，系统会限制非SDK的接口调用，也就是如果App通过反射使用系统隐藏的API，则会弹出提示。</p>
<p>具体的细节可参考：<a href="https://developer.android.com/about/versions/pie/restrictions-non-sdk-interfaces?hl=zh-cn" target="_blank" rel="noopener">https://developer.android.com/about/versions/pie/restrictions-non-sdk-interfaces?hl=zh-cn</a></p>
<p>Android P中，将所有API分为以下几类：</p>
<ul>
<li>白名单：SDK的API，正常使用；</li>
<li>浅灰名单（light greylist）会在logcat弹出提示：Accessing hidden field Landroid/os/Message;-&gt;flags:I (light greylist, JNI)；</li>
<li>深灰名单（dark greylist）则debug版本在会弹出dialog提示框，在release版本会有Toast提示，均提示为”Detected problems with API compatibility”。；</li>
<li>黑名单(darklist)则会引发异常。</li>
</ul>
<p>看了logcat日志，项目中许多地方使用到了系统私有API，直接全部修改工作量比较大，于是寻找解决方案。</p>
<p>最后发现原因是在SDK 28版本中Activity中的performStart有这个警告，只要在调用performStart前，ActivityThread的mHiddenApiWarningShown变量的值为true，产生这个警告的条件就无法满足。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">boolean isAppDebuggable = (mApplication.getApplicationInfo().flags &amp; ApplicationInfo.FLAG_DEBUGGABLE) != 0;</span><br><span class="line">// This property is set for all non-user builds except final release</span><br><span class="line">boolean isApiWarningEnabled = SystemProperties.getInt(&quot;ro.art.hiddenapi.warning&quot;, 0) == 1;</span><br><span class="line">if (isAppDebuggable || isApiWarningEnabled) &#123;</span><br><span class="line">    if (!mMainThread.mHiddenApiWarningShown &amp;&amp; VMRuntime.getRuntime().hasUsedHiddenApi()) &#123;</span><br><span class="line">        // Only show the warning once per process.</span><br><span class="line">        mMainThread.mHiddenApiWarningShown = true;</span><br><span class="line">        String appName = getApplicationInfo().loadLabel(getPackageManager())</span><br><span class="line">                .toString();</span><br><span class="line">        String warning = &quot;Detected problems with API compatibility\n&quot;</span><br><span class="line">                         + &quot;(visit g.co/dev/appcompat for more info)&quot;;</span><br><span class="line">        if (isAppDebuggable) &#123;</span><br><span class="line">            new AlertDialog.Builder(this)</span><br><span class="line">                .setTitle(appName)</span><br><span class="line">                .setMessage(warning)</span><br><span class="line">                .setPositiveButton(android.R.string.ok, null)</span><br><span class="line">                .setCancelable(false)</span><br><span class="line">                .show();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Toast.makeText(this, appName + &quot;\n&quot; + warning, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体是在Application OnCreate加入以下代码：（通过反射私有变量来解决私有API的warning，也是有趣）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">    Class&lt;?&gt; cls = Class.forName(&quot;android.app.ActivityThread&quot;);</span><br><span class="line">    Method declaredMethod = cls.getDeclaredMethod(&quot;currentActivityThread&quot;);</span><br><span class="line">    declaredMethod.setAccessible(true);</span><br><span class="line">    Object activityThread = declaredMethod.invoke(null);</span><br><span class="line">    Field mHiddenApiWarningShown = cls.getDeclaredField(&quot;mHiddenApiWarningShown&quot;);</span><br><span class="line">    mHiddenApiWarningShown.setAccessible(true);</span><br><span class="line">    mHiddenApiWarningShown.setBoolean(activityThread, true);</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最终warning框不再弹出，但是logcat依旧，在Logcat中看到，修改mHiddenApiWarningShown本身就是dark greylist，估计后续该办法会给官方禁用。</p>
<p>最好的解决方式是根据logcat的warning提示，对使用darklist的地方必须进行修改，尽量避免使用dark greylist方法。</p>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Cookie-的路径以及-Cookie-域，设置同一域名下多个Tomcat共享Cookie" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/6d1addbc.html">Cookie 的路径以及 Cookie 域，设置同一域名下多个Tomcat共享Cookie</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/6d1addbc.html">
            <time datetime="2018-12-29T03:22:55.000Z" itemprop="datePublished">2018-12-29</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/J2EE/">J2EE</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Cookie/">Cookie</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="Cookie-路径"><a href="#Cookie-路径" class="headerlink" title="Cookie 路径"></a>Cookie 路径</h4><p>cookie 一般都是由于用户访问页面而被创建的，可是并不是只有在创建 cookie 的页面才可以访问这个cookie。在默认情况下，出于安全方面的考虑，只有与创建 cookie 的页面处于同一个目录或在创建cookie页面的子目录下的网页才可以访问。那么此时如果希望其父级或者整个网页都能够使用cookie，就需要进行路径的设置。</p>
<p>让这个设置的cookie 能被其他目录或者父级的目录访问的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.cookie = &quot;userName = 独行冰海; path=/&quot;;</span><br></pre></td></tr></table></figure></p>
<h4 id="Cookie-域"><a href="#Cookie-域" class="headerlink" title="Cookie 域"></a>Cookie 域</h4><p>路径能解决在同一个域下访问 cookie 的问题，那么如何解决同一个主域下的访问问题呢？我们可以通过指定可访问cookie的主机名来进行设置。</p>
<p>document.cookie=”name=value; domain=cookieDomain”;</p>
<p>例如 “<a href="http://www.baidu.com&quot;" target="_blank" rel="noopener">www.baidu.com&quot;</a> 与 “mp3.baidu.com” 公用一个关联的域名”baidu.com”，我们如果想让 “<a href="http://www.baidu.com&quot;" target="_blank" rel="noopener">www.baidu.com&quot;</a> 下的cookie被 “mp3.baidu.com” 访问，我们就需要用到 cookie 的domain属性，并且需要把path属性设置为 “/“</p>
<p>这里需要注意一点：一定的是同域之间的访问，不能把domain的值设置成非主域的域名。</p>
<p>默认cookie的域是当前域名，默认的路径的设置cookie时的当前页面的目录路径。如果想要跨域或者在其他的路径下访问cookie就必须要重新设置这两个属性，<fon color="red">domain和<fon color="red">path。</fon></fon></p>
<p><a href="http://www.baidu.com/content/example/3.jsp" target="_blank" rel="noopener">www.baidu.com/content/example/3.jsp</a><br>则域domain为<a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>, 路径path为/content/example</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.cookie = &quot;username=独行冰海; path=/; domain=baidu.com&quot;</span><br></pre></td></tr></table></figure>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-使用百度地图API解决区县级以下行政区划轮廓问题" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/9b175123.html">使用百度地图API解决区县级以下行政区划轮廓问题</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/9b175123.html">
            <time datetime="2018-10-10T08:30:17.000Z" itemprop="datePublished">2018-10-10</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/地图/">地图</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Baidu-Map/">Baidu Map</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>我们在项目开发中经常会遇到在地图上显示区划轮廓的情况，所幸现在各大地图服务商都提供了获取区划边界（县区以上）的功能（有时候边界不准，但总比没有强），例如百度提供的显示区划的边界。<br>百度地图demo例子： <a href="http://lbsyun.baidu.com/jsdemo.htm#c1_10" target="_blank" rel="noopener">http://lbsyun.baidu.com/jsdemo.htm#c1_10</a><br><img src="http://images2017.cnblogs.com/blog/343553/201712/343553-20171204230919534-281582503.png" alt=""></p>
<p>以及基于高德地图的区划显示：<br><a href="http://webapi.amap.com/ui/1.0/ui/geo/DistrictExplorer/examples/index.html?guide=1" target="_blank" rel="noopener">http://webapi.amap.com/ui/1.0/ui/geo/DistrictExplorer/examples/index.html?guide=1</a></p>
<p>但是改功能只能展示区级及以上范围行政区划。</p>
<p>研究了一下百度地图行政区划的实现方式，其实就是存储了行政区划的边界点集合，显示时候其实是显示的点的多边形的集合。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function getBoundary()&#123;       </span><br><span class="line">		var bdary = new BMap.Boundary();</span><br><span class="line">		bdary.get(&quot;北京市海淀区&quot;, function(rs)&#123;       //获取行政区域</span><br><span class="line">			map.clearOverlays();        //清除地图覆盖物       </span><br><span class="line">			var count = rs.boundaries.length; //行政区域的点有多少个</span><br><span class="line">			if (count === 0) &#123;</span><br><span class="line">				alert(&apos;未能获取当前输入行政区域&apos;);</span><br><span class="line">				return ;</span><br><span class="line">			&#125;</span><br><span class="line">          	var pointArray = [];</span><br><span class="line">			for (var i = 0; i &lt; count; i++) &#123;</span><br><span class="line">				var ply = new BMap.Polygon(rs.boundaries[i], &#123;strokeWeight: 2, strokeColor: &quot;#ff0000&quot;&#125;); //建立多边形覆盖物</span><br><span class="line">				map.addOverlay(ply);  //添加覆盖物</span><br><span class="line">				pointArray = pointArray.concat(ply.getPath());</span><br><span class="line">			&#125;    </span><br><span class="line">			map.setViewport(pointArray);    //调整视野  </span><br><span class="line">			addlabel();               </span><br><span class="line">		&#125;);   </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure></p>
<p>那我们自己也可以按照这个逻辑来实现乡镇行政区划的展示，那现在的问题就是如何来获取行政区边界的点集,从百度地图api V1.1版本，polygon类提供了enableEditing()功能，我们可以在地图上拖动编辑边界点，然后，再通过polygon类提供的getPath()方法返回边界点数组，将我们自己编辑过的边界点数组存储起来，就实现了行政区划的数字化工作。</p>
<p>整体实现见文件：<br><a href="https://snippets.cacher.io/snippet/c155ff38ee57e049fd90" target="_blank" rel="noopener">地图经纬度描点工具</a></p>
<p>关键代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># 显示所有区划</span><br><span class="line">function showMyArea() &#123;</span><br><span class="line">        var areas = [];</span><br><span class="line">        //铁西区</span><br><span class="line">        var siping_tiexiqu = &quot;124.394261,43.200225;124.363162,43.14644;124.359246,43.131221;124.342686,43.13835;124.327579,43.153527;124.299905,43.163609;124.292776,43.176343;124.281179,43.184908;124.286515,43.199605;124.2953,43.209288;124.28495,43.235119;124.301071,43.234313;124.30711,43.23646;124.309022,43.250198;124.313187,43.255563;124.320604,43.254237;124.328298,43.256463;124.332289,43.255015;124.335821,43.24598;124.349095,43.244098;124.356816,43.248521;124.369427,43.248006;124.374714,43.243444;124.390598,43.244364;124.399349,43.239998;124.410266,43.243724;124.415474,43.238964;124.425377,43.239837;124.423989,43.235824;124.42865,43.236023;124.43232,43.232498;124.438555,43.233977;124.438702,43.228258;124.452916,43.225358;124.446783,43.218094;124.435393,43.215793;124.423932,43.203086;124.403633,43.203134;124.394261,43.200225&quot;;</span><br><span class="line">//    var siping_lishu = &quot;124.717877,43.184866;124.66483,43.180224;124.643888,43.1635;124.634191,43.151678;124.628805,43.15007;124.61549,43.165761;124.599496,43.167858;124.578632,43.183615;124.572448,43.184601;124.569519,43.182571;124.571261,43.188129;124.531548,43.186809;124.525446,43.196129;124.494772,43.206798;124.488282,43.215329;124.476199,43.222616;124.438702,43.228258;124.438555,43.233977;124.43232,43.232498;124.42865,43.236023;124.423989,43.235824;124.425377,43.239837;124.415474,43.238964;124.410266,43.243724;124.399349,43.239998;124.390598,43.244364;124.374714,43.243444;124.369427,43.248006;124.356816,43.248521;124.349095,43.244098;124.340037,43.245237;124.335821,43.24598;124.331431,43.255935;124.320604,43.254237;124.314992,43.256494;124.309022,43.250198;124.30853,43.237342;124.294073,43.234175;124.283577,43.235176;124.28107,43.239702;124.269164,43.237759;124.266655,43.245038;124.259782,43.238071;124.257449,43.24366;124.251762,43.243022;124.249587,43.239765;124.241543,43.242631;124.235055,43.241337;124.231932,43.248111;124.225847,43.247806;124.229393,43.251877;124.22312,43.252848;124.222754,43.262281;124.208845,43.25729;124.205514,43.252726;124.201234,43.253584;124.198692,43.24972;124.195014,43.252969;124.184336,43.249269;124.183183,43.25468;124.179313,43.255896;124.175818,43.250119;124.164593,43.257501;124.157209,43.254853;124.147483,43.258949;124.134178,43.254178;124.121673,43.255854;124.119411,43.2828;124.108225,43.299548;124.051683,43.295149;124.041668,43.289664;124.03353,43.289105;124.007062,43.311549;124.001684,43.312088;123.956243,43.356327;123.941881,43.359869;123.928481,43.366864;123.904879,43.363339;123.899711,43.377361;123.907784,43.386242;123.902929,43.392938;123.897976,43.396915;123.877266,43.40022;123.853355,43.425646;123.875252,43.444157;123.872991,43.459346;123.847204,43.476725;123.837107,43.474812;123.799451,43.498242;123.791182,43.483941;123.784907,43.483314;123.772711,43.495354;123.778534,43.513874;123.784022,43.516719;123.785764,43.522433;123.792631,43.522182;123.798089,43.525946;123.799205,43.542823;123.809716,43.552573;123.830938,43.55756;123.842469,43.55425;123.852855,43.557246;123.868418,43.555772;123.886379,43.56175;123.890321,43.565408;123.892139,43.586177;123.899506,43.590187;123.900722,43.594354;123.910263,43.597505;123.927287,43.597878;123.931247,43.604624;123.936321,43.601905;123.944076,43.602656;123.952315,43.619391;123.96463,43.620919;123.976669,43.63034;123.985999,43.628109;123.987383,43.632232;123.997123,43.635666;124.003678,43.650564;124.015595,43.649861;124.02115,43.662984;124.033997,43.665187;124.045211,43.662798;124.055615,43.667878;124.067245,43.693561;124.084376,43.70277;124.105542,43.707627;124.10714,43.714171;124.115462,43.711159;124.141787,43.715909;124.136447,43.710529;124.151598,43.709754;124.155335,43.713911;124.181124,43.713578;124.183484,43.719179;124.195015,43.718619;124.204286,43.736224;124.210587,43.7382;124.211798,43.748612;124.219898,43.751659;124.214398,43.761009;124.224091,43.764159;124.293399,43.768221;124.363848,43.776467;124.408229,43.767412;124.417658,43.770994;124.415863,43.766106;124.435428,43.762663;124.465599,43.765999;124.468391,43.768789;124.487087,43.756202;124.489668,43.758576;124.503633,43.754509;124.536092,43.759688;124.541466,43.752034;124.55246,43.749835;124.560309,43.737036;124.581525,43.727615;124.605665,43.695414;124.63191,43.687309;124.669728,43.666632;124.685555,43.634384;124.681797,43.610145;124.68706,43.595558;124.697827,43.582857;124.698733,43.560558;124.691779,43.5354;124.681796,43.520622;124.683705,43.512157;124.716562,43.448648;124.735872,43.428534;124.744233,43.400559;124.763803,43.386218;124.762479,43.372668;124.768286,43.361576;124.766678,43.354669;124.773502,43.350665;124.780015,43.332178;124.771381,43.320117;124.773549,43.314083;124.766845,43.311227;124.761519,43.303088;124.76599,43.284148;124.779824,43.279007;124.789961,43.262506;124.806291,43.249429;124.804008,43.245594;124.780772,43.238268;124.789005,43.225899;124.785969,43.220874;124.781806,43.221451;124.766526,43.214592;124.749493,43.214538;124.742382,43.211513;124.731807,43.203054;124.722254,43.187024;124.717877,43.184866&quot;;</span><br><span class="line">        var siping_shuangliao = &quot;124.042873,43.790715;124.051277,43.786682;124.052739,43.778252;124.058225,43.772763;124.077469,43.763807;124.088468,43.748916;124.080787,43.7408;124.08685,43.736531;124.081597,43.725383;124.085757,43.719901;124.065518,43.700331;124.067245,43.693561;124.055615,43.667878;124.045211,43.662798;124.033997,43.665187;124.02115,43.662984;124.015595,43.649861;124.003678,43.650564;123.997123,43.635666;123.987383,43.632232;123.985999,43.628109;123.976669,43.63034;123.96463,43.620919;123.952315,43.619391;123.944076,43.602656;123.936321,43.601905;123.931247,43.604624;123.927287,43.597878;123.902776,43.59565;123.892139,43.586177;123.890321,43.565408;123.886379,43.56175;123.868418,43.555772;123.852855,43.557246;123.842469,43.55425;123.828592,43.557384;123.81302,43.554498;123.802316,43.547013;123.798628,43.54067;123.798672,43.526677;123.792631,43.522182;123.785764,43.522433;123.774051,43.504054;123.772711,43.495354;123.777268,43.489891;123.752252,43.476509;123.759203,43.469826;123.757652,43.459991;123.751933,43.457362;123.750169,43.452679;123.755332,43.445024;123.715638,43.422409;123.716833,43.418282;123.709243,43.409574;123.711438,43.402334;123.705994,43.396928;123.715997,43.391705;123.703311,43.388443;123.712092,43.382062;123.710983,43.377456;123.62133,43.373124;123.598131,43.379545;123.522193,43.444011;123.512911,43.45786;123.500463,43.465142;123.494028,43.477091;123.483002,43.473455;123.472841,43.462331;123.461033,43.456747;123.459223,43.446648;123.447419,43.42816;123.433992,43.428351;123.43603,43.439693;123.427419,43.450086;123.379298,43.47231;123.362449,43.485943;123.34236,43.493273;123.332469,43.503763;123.327763,43.511364;123.33164,43.523684;123.310911,43.540146;123.320041,43.557667;123.348534,43.561271;123.378195,43.570561;123.389297,43.568752;123.389387,43.571749;123.396067,43.572015;123.463797,43.557764;123.460202,43.566822;123.46838,43.577293;123.452914,43.587256;123.441784,43.587736;123.432856,43.605675;123.44679,43.60626;123.467166,43.599959;123.471532,43.591476;123.480863,43.597734;123.49698,43.594172;123.517193,43.599177;123.519948,43.610441;123.513174,43.617549;123.51985,43.621579;123.515464,43.626076;123.520978,43.628135;123.517585,43.631613;123.529982,43.635857;123.53534,43.631656;123.53848,43.632349;123.536687,43.635355;123.543916,43.640053;123.539329,43.647914;123.5444,43.652612;123.525798,43.687287;123.532239,43.696493;123.531603,43.702222;123.525847,43.706869;123.52596,43.718158;123.516232,43.722883;123.505241,43.739671;123.496774,43.737758;123.487567,43.745904;123.483789,43.77504;123.494444,43.776501;123.501559,43.78545;123.499407,43.803716;123.481611,43.840772;123.482287,43.856787;123.452258,43.893516;123.430365,43.93139;123.419071,43.936521;123.402802,43.96007;123.388592,43.958376;123.384068,43.964666;123.378099,43.962544;123.373771,43.965703;123.373577,43.969303;123.383861,43.979299;123.395591,43.981438;123.395565,43.984415;123.364993,44.016265;123.356972,44.0382;123.34751,44.051899;123.342118,44.073228;123.35943,44.077181;123.399417,44.077001;123.473648,44.087508;123.545063,44.082973;123.564344,44.089648;123.594181,44.095005;123.615549,44.087754;123.644973,44.083419;123.654037,44.093894;123.664629,44.097616;123.671401,44.111337;123.687419,44.112253;123.690863,44.110459;123.700227,44.083833;123.708153,44.082213;123.722556,44.071261;123.72776,44.061455;123.742862,44.052214;123.760658,44.047782;123.774276,44.035587;123.778164,44.027963;123.772542,44.021461;123.772747,44.016087;123.758252,44.00863;123.762618,44.006331;123.945659,43.99816;124.015917,44.00685;124.024136,44.011349;124.029537,43.97389;124.043655,43.935458;124.068589,43.904531;124.071157,43.896849;124.084317,43.887286;124.093782,43.873998;124.086758,43.860948;124.086314,43.847292;124.077004,43.81536;124.066149,43.803093;124.049835,43.798838;124.042873,43.790715&quot;;</span><br><span class="line">//    var siping_tiedong = &quot;124.705676,43.066287;124.694906,43.059818;124.693465,43.043515;124.683754,43.033515;124.676525,43.008178;124.660432,42.99986;124.6669,42.98847;124.665799,42.981285;124.662003,42.979528;124.651681,42.981089;124.641698,42.97714;124.638527,42.965856;124.643466,42.960056;124.636521,42.955115;124.627582,42.953923;124.626315,42.947049;124.610895,42.942614;124.608754,42.929016;124.590857,42.911976;124.576528,42.905436;124.566758,42.896293;124.556547,42.896736;124.548121,42.892854;124.544029,42.874418;124.540939,42.873835;124.537413,42.877992;124.521088,42.879005;124.5037,42.868654;124.483558,42.863731;124.471792,42.85312;124.478175,42.837632;124.475871,42.830389;124.469195,42.828292;124.456918,42.832002;124.457914,42.858621;124.454402,42.869513;124.442829,42.874664;124.442411,42.885941;124.435814,42.886351;124.430807,42.880584;124.415876,42.886135;124.378219,42.886463;124.373799,42.888743;124.37172,42.90827;124.385047,42.918898;124.394206,42.916099;124.401643,42.921126;124.402872,42.926244;124.416546,42.927711;124.424387,42.935146;124.434587,42.936012;124.439488,42.944455;124.448357,42.948497;124.450013,42.952171;124.444542,42.958783;124.443686,42.969251;124.432745,42.974805;124.42448,42.983304;124.416905,42.983039;124.403225,42.976022;124.378916,42.976809;124.372223,42.981688;124.361067,42.98421;124.353018,42.995196;124.340034,43.005225;124.342607,43.009178;124.355846,43.014961;124.407003,43.057656;124.432235,43.085352;124.402742,43.098544;124.374603,43.125785;124.359246,43.131221;124.363162,43.14644;124.397274,43.202349;124.423932,43.203086;124.435393,43.215793;124.446783,43.218094;124.452916,43.225358;124.469939,43.224055;124.488282,43.215329;124.495937,43.2062;124.525446,43.196129;124.531548,43.186809;124.571261,43.188129;124.569519,43.182571;124.572448,43.184601;124.578632,43.183615;124.599496,43.167858;124.61549,43.165761;124.628805,43.15007;124.634191,43.151678;124.643888,43.1635;124.66483,43.180224;124.720662,43.185079;124.731807,43.203054;124.742382,43.211513;124.749493,43.214538;124.766526,43.214592;124.781806,43.221451;124.785969,43.220874;124.784753,43.215893;124.789283,43.207608;124.797406,43.202439;124.802947,43.202128;124.862577,43.152095;124.882296,43.146951;124.889477,43.140778;124.876792,43.130429;124.865065,43.125194;124.847178,43.132478;124.82973,43.13089;124.817815,43.124223;124.803436,43.128672;124.792125,43.123213;124.789136,43.109875;124.765721,43.093879;124.756951,43.077764;124.750536,43.075246;124.7301,43.075588;124.705676,43.066287&quot;;</span><br><span class="line">//    var siping_yitong = &quot;125.69856,43.159455;125.71094,43.145087;125.715378,43.134793;125.725056,43.129752;125.763785,43.135943;125.789178,43.103631;125.761329,43.092263;125.738352,43.092162;125.744211,43.081889;125.738983,43.071085;125.715416,43.063864;125.688822,43.065002;125.668908,43.083287;125.666393,43.082402;125.665934,43.066856;125.670723,43.061151;125.641169,43.076562;125.615797,43.073263;125.591668,43.076397;125.565144,43.096881;125.549985,43.102503;125.500886,43.106488;125.485028,43.155521;125.485218,43.169048;125.496754,43.187553;125.490238,43.201717;125.485311,43.207353;125.470036,43.209848;125.463224,43.221474;125.453818,43.22573;125.453798,43.229729;125.443863,43.2291;125.440123,43.236465;125.427152,43.2392;125.416982,43.235636;125.408221,43.225987;125.379634,43.230478;125.374088,43.225064;125.379629,43.207776;125.377206,43.192683;125.362836,43.168997;125.3726,43.158892;125.407072,43.153791;125.408958,43.146091;125.395757,43.12682;125.395028,43.114575;125.391863,43.112176;125.381653,43.116718;125.371812,43.116471;125.344108,43.133751;125.319669,43.140772;125.276322,43.15996;125.272872,43.167332;125.253068,43.181747;125.239981,43.198245;125.21615,43.217362;125.211327,43.231127;125.205531,43.235003;125.16428,43.23562;125.150824,43.22971;125.107542,43.227699;125.099243,43.221878;125.090661,43.223222;125.076187,43.220885;125.065525,43.22201;125.05915,43.226496;125.048656,43.228347;125.025351,43.216848;125.018896,43.20533;125.011608,43.202528;124.976874,43.19961;124.971733,43.196297;124.969075,43.181092;124.918465,43.151707;124.901196,43.1482;124.889477,43.140778;124.877749,43.148854;124.870447,43.14839;124.862577,43.152095;124.842464,43.171445;124.852617,43.177367;124.853677,43.187482;124.843309,43.20094;124.831637,43.208099;124.820906,43.219624;124.83584,43.228332;124.877815,43.289829;124.886845,43.293606;124.888399,43.298172;124.897124,43.295972;124.904027,43.303007;124.912078,43.303009;124.919277,43.309617;124.919458,43.315532;124.923375,43.315199;124.92827,43.321344;124.936342,43.322942;124.935973,43.335351;124.925159,43.34244;124.925775,43.352215;124.922243,43.356684;124.890738,43.364948;124.885908,43.393101;124.87681,43.399868;124.873441,43.408268;124.866809,43.411792;124.876704,43.425816;124.892119,43.431498;124.899424,43.428337;124.904153,43.429498;124.921021,43.444102;124.918788,43.455558;124.921218,43.464337;124.914027,43.467923;124.900909,43.488901;124.928123,43.507321;124.969738,43.516282;124.992504,43.524596;125.009992,43.545531;125.010452,43.551151;125.018159,43.555221;125.041166,43.587235;125.071844,43.604529;125.078096,43.60678;125.083693,43.604684;125.100051,43.608944;125.103832,43.600358;125.126387,43.617435;125.161214,43.628554;125.208127,43.638346;125.232633,43.640178;125.242586,43.647241;125.255591,43.651664;125.288208,43.654382;125.305187,43.651056;125.307064,43.617477;125.298133,43.607041;125.300814,43.601659;125.297212,43.591908;125.278473,43.570437;125.288777,43.548713;125.286467,43.5447;125.27214,43.541249;125.265632,43.530071;125.275272,43.505202;125.266315,43.496397;125.252066,43.49415;125.244318,43.484082;125.251525,43.459845;125.257241,43.454801;125.293229,43.450238;125.306601,43.454738;125.315699,43.462179;125.331495,43.465616;125.360209,43.481921;125.371211,43.484638;125.383976,43.48194;125.391019,43.484364;125.389952,43.491028;125.383666,43.494887;125.385964,43.501981;125.375229,43.507436;125.375993,43.510695;125.372066,43.5125;125.374911,43.515425;125.365494,43.51901;125.377152,43.532367;125.3936,43.538578;125.383847,43.558537;125.395543,43.563925;125.407299,43.591817;125.435137,43.59508;125.455112,43.608795;125.459521,43.597839;125.456925,43.592145;125.459064,43.582223;125.465409,43.567734;125.462613,43.5485;125.453487,43.536558;125.463749,43.529068;125.469338,43.50595;125.48315,43.489724;125.493123,43.487568;125.498716,43.478667;125.494589,43.461839;125.508285,43.457884;125.514947,43.450957;125.522522,43.448737;125.50991,43.437685;125.504573,43.424785;125.512976,43.423616;125.519705,43.418771;125.540831,43.41729;125.55511,43.410032;125.58243,43.413632;125.589968,43.400564;125.588601,43.385648;125.587758,43.38331;125.568671,43.37834;125.553565,43.371051;125.551648,43.363071;125.560871,43.350705;125.577136,43.342083;125.602444,43.32027;125.614131,43.318399;125.626853,43.312196;125.634414,43.301839;125.679284,43.285987;125.689942,43.278994;125.694405,43.258222;125.682035,43.247226;125.675024,43.245323;125.668861,43.234842;125.660065,43.230828;125.655326,43.221257;125.660673,43.20562;125.672175,43.204562;125.677828,43.193732;125.693738,43.177593;125.691426,43.17047;125.69856,43.159455&quot;</span><br><span class="line"></span><br><span class="line">        var shuangliao_maolin = &quot;123.441047,43.91511;123.45657,43.913032;123.458869,43.91511;123.461169,43.91802;123.461744,43.919682;123.463469,43.923007;123.469793,43.925915;123.474392,43.926746;123.483016,43.929655;123.486465,43.931317;123.491065,43.932564;123.494514,43.935888;123.496814,43.937549;123.501413,43.939627;123.508312,43.94295;123.511761,43.944612;123.514061,43.946273;123.512911,43.942535;123.516936,43.941288;123.52096,43.940458;123.526134,43.942119;123.526134,43.944196;123.530159,43.94295;123.533033,43.946689;123.534758,43.945858;123.556605,43.952504;123.562929,43.955411;123.564079,43.959149;123.566953,43.95998;123.567528,43.962472;123.564079,43.962887;123.560629,43.966624;123.564079,43.967039;123.564654,43.971192;123.562929,43.974514;123.564654,43.986138;123.570403,43.985723;123.583051,43.986553;123.586501,43.986553;123.59225,43.986553;123.595124,43.986968;123.606048,43.988629;123.62272,43.990289;123.72678,43.99942;123.733679,43.999005;123.737703,43.99776;123.741728,43.9961;123.744027,43.9961;123.748627,43.996515;123.752076,43.99942;123.75725,44.002325;123.7584,44.00274;123.762425,44.0044;123.772198,44.00606;123.767671,44.006177;123.762658,44.00641;123.758328,44.008641;123.772755,44.016058;123.772576,44.021464;123.778181,44.027933;123.778199,44.027985;123.774309,44.035581;123.764365,44.044517;123.760673,44.047835;123.745087,44.051696;123.742887,44.052253;123.727786,44.061479;123.722603,44.071259;123.708185,44.08223;123.700253,44.083868;123.691926,44.107531;123.690893,44.110463;123.687443,44.112282;123.679987,44.111874;123.671372,44.111376;123.669962,44.108535;123.668112,44.10478;123.666908,44.102307;123.665264,44.098993;123.66459,44.097633;123.654008,44.093917;123.644962,44.083467;123.615561,44.087786;123.594181,44.09505;123.569118,44.090544;123.564375,44.089696;123.55294,44.085733;123.545053,44.083014;123.517942,44.08473;123.509516,44.085267;123.478192,44.087248;123.473664,44.087546;123.431435,44.08157;123.39941,44.077036;123.371428,44.077153;123.359409,44.077211;123.342081,44.073248;123.34747,44.051897;123.356948,44.038199;123.364969,44.016271;123.39553,43.984419;123.395548,43.981461;123.383834,43.979334;123.37353,43.96931;123.373737,43.965703;123.378076,43.962536;123.38404,43.964652;123.388586,43.958371;123.402779,43.960064;123.419047,43.936517;123.43033,43.931389;123.439601,43.915364;123.439646,43.915299;123.441038,43.91513&quot;</span><br><span class="line">//    var shuangliao_bolishanzhen = &quot;123.482297,43.856902;123.487471,43.85607;123.489771,43.857734;123.491496,43.85607;123.492646,43.859398;123.49782,43.85607;123.500119,43.856486;123.498395,43.861478;123.500694,43.862726;123.501844,43.862726;123.503569,43.863974;123.507593,43.865638;123.509893,43.868966;123.516792,43.871461;123.519667,43.871045;123.524266,43.872293;123.524841,43.873957;123.53289,43.875204;123.534614,43.873957;123.539214,43.876868;123.542663,43.877284;123.544388,43.878531;123.557036,43.875204;123.579458,43.86855;123.582907,43.868966;123.582907,43.866886;123.585782,43.866054;123.593256,43.867718;123.613378,43.852326;123.622576,43.845252;123.617977,43.843172;123.612228,43.83693;123.609353,43.837346;123.603604,43.833184;123.59728,43.831935;123.593831,43.832768;123.589231,43.829022;123.589806,43.826941;123.587507,43.82486;123.581757,43.826524;123.561635,43.821113;123.561635,43.817783;123.561061,43.815701;123.557611,43.815701;123.554736,43.811954;123.549562,43.810289;123.543238,43.80904;123.540938,43.80904;123.536339,43.812371;123.53174,43.811954;123.527715,43.80904;123.522541,43.807374;123.516217,43.805709;123.512768,43.805709;123.506444,43.801961;123.502994,43.800712;123.501269,43.801129;123.499545,43.801545;123.499257,43.803705;123.481399,43.840779;123.482189,43.856746;123.482297,43.856902&quot;</span><br><span class="line">        var shuangliao_bolishanzhen = &quot;123.482297,43.856902;123.487471,43.85607;123.489771,43.857734;123.491496,43.85607;123.492646,43.859398;123.49782,43.85607;123.500119,43.856486;123.498395,43.861478;123.500694,43.862726;123.501844,43.862726;123.503569,43.863974;123.507593,43.865638;123.509893,43.868966;123.516792,43.871461;123.519667,43.871045;123.524266,43.872293;123.524841,43.873957;123.53289,43.875204;123.534614,43.873957;123.539214,43.876868;123.542663,43.877284;123.544388,43.878531;123.557036,43.875204;123.579458,43.86855;123.582907,43.868966;123.582907,43.866886;123.585782,43.866054;123.593256,43.867718;123.613378,43.852326;123.622576,43.845252;123.617977,43.843172;123.612228,43.83693;123.609353,43.837346;123.603604,43.833184;123.59728,43.831935;123.593831,43.832768;123.589231,43.829022;123.589806,43.826941;123.587507,43.82486;123.581757,43.826524;123.582117,43.815345;123.561635,43.817783;123.561061,43.815701;123.557611,43.815701;123.554736,43.811954;123.549562,43.810289;123.543238,43.80904;123.540938,43.80904;123.536339,43.812371;123.53174,43.811954;123.527715,43.80904;123.522541,43.807374;123.516217,43.805709;123.512768,43.805709;123.506444,43.801961;123.502994,43.800712;123.501269,43.801129;123.499545,43.801545;123.499257,43.803705;123.481399,43.840779;123.482189,43.856746;123.482297,43.856902&quot;</span><br><span class="line"></span><br><span class="line">        areas.push(siping_shuangliao);</span><br><span class="line">        areas.push(shuangliao_maolin);</span><br><span class="line">        areas.push(shuangliao_bolishanzhen);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//    areas.push(siping_lishu);</span><br><span class="line">//    areas.push(siping_tiexiqu);</span><br><span class="line">//    areas.push(siping_shuangliao);</span><br><span class="line">//    areas.push(siping_tiedong);</span><br><span class="line">//    areas.push(siping_yitong);</span><br><span class="line">        colors = [&quot;#fff492&quot;, &quot;#fff492&quot;, &quot;#98d057&quot;, &quot;#e19ee6&quot;, &quot;#1ad3da&quot;, &quot;#ffc11d&quot;, &quot;#98e800&quot;, &quot;#b95817&quot;, &quot;#03a9f4&quot;, &quot;#39d0a4&quot;, &quot;#8bbb53&quot;];</span><br><span class="line">        var pointArray = [];</span><br><span class="line">        for (var i = 0; i &lt; areas.length; i++) &#123;</span><br><span class="line"></span><br><span class="line">            var ply = new BMap.Polygon(areas[i], &#123;strokeWeight: 2, strokeColor: &quot;#ff0000&quot;&#125;); //建立多边形覆盖物</span><br><span class="line">            ply.setFillColor(colors[i])   //设置多边形的填充颜色</span><br><span class="line">            ply.setFillOpacity(0.35);</span><br><span class="line">//            ply.enableEditing();  //范围可编辑 【编辑的时候开启】</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            if (i == 2) &#123;</span><br><span class="line">                polygons.push(ply);  //加入多边形数组，以之后获取多边形边界点集</span><br><span class="line">                ply.enableEditing();  //范围可编辑 【编辑的时候开启】</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            map.addOverlay(ply);  //添加覆盖物</span><br><span class="line">            pointArray = pointArray.concat(ply.getPath());</span><br><span class="line">        &#125;</span><br><span class="line">        map.setViewport(pointArray);    //调整视野</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//获取编辑后的边界点集【编辑完后，可以通过 button 来触发这个方法】</span><br><span class="line">    function getpoints() &#123;</span><br><span class="line">        for (var j = 0; j &lt; polygons.length; j++) &#123;</span><br><span class="line">            var polyline = polygons[j];</span><br><span class="line">            var pts = polyline.getPath();</span><br><span class="line"></span><br><span class="line">            var sss = &quot;&quot;;</span><br><span class="line">            for (var i = 0; i &lt; pts.length; i++) &#123;</span><br><span class="line">                sss += pts[i].lng + &quot;,&quot; + pts[i].lat + &quot;;&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            document.getElementById(&quot;info&quot;).innerHTML = &quot;&quot;;</span><br><span class="line">            document.getElementById(&quot;info&quot;).innerHTML += sss;    //输出数组里的经纬度</span><br><span class="line"></span><br><span class="line">            console.log(sss);   //【将点集输出到控制台】</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        alert(&apos;已输出边界点集合!&apos;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h5 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h5><ul>
<li><a href="https://zhfw.tianditu.gov.cn/" target="_blank" rel="noopener">天地图</a></li>
<li><a href="http://lbsyun.baidu.com/jsdemo.htm#c1_10" target="_blank" rel="noopener">百度地图</a></li>
<li><a href="https://www.bbsmax.com/A/n2d9bZOVzD/" target="_blank" rel="noopener">百度地图api 区级以下行政区划</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Android修改全局Window窗口大小" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/2c02c669.html">Android修改全局Window窗口大小</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/2c02c669.html">
            <time datetime="2018-09-10T23:54:42.000Z" itemprop="datePublished">2018-09-11</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Window/">Window</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>在项目开发过程中，如果屏幕宽高比过于悬殊，例如电视大小的安卓设备（定制），在显示应用的时候需要居中显示，两边留白，按照手机大小显示应用。怎么实现呢？<br>思路是通过修改应用的window大小来实现。但是window是绑定activity的，所以需要修改所有界面的window大小。</p>
<p>实现效果如下：<br><img src="/images/Android/3.jpg" alt=""><br>实现方式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"># 定义activity生命周期监听</span><br><span class="line">private ActivityLifecycleCallbacks mActivityLifecycleCallbacks = new ActivityLifecycleCallbacks() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onActivityCreated(Activity activity, Bundle savedInstanceState) &#123;</span><br><span class="line">        if (Build.MODEL.equalsIgnoreCase(&quot;3280&quot;)</span><br><span class="line">                &amp;&amp; Build.MANUFACTURER.equalsIgnoreCase(&quot;rockchip&quot;)) &#123;</span><br><span class="line">            //特殊设备，设置宽度</span><br><span class="line">            WindowManager m = activity.getWindowManager();</span><br><span class="line">            Display d = m.getDefaultDisplay();  //为获取屏幕宽、高</span><br><span class="line">            android.view.WindowManager.LayoutParams p = activity.getWindow().getAttributes();  //获取对话框当前的参数值</span><br><span class="line">            p.height = (int) (d.getHeight() * 1);   //高度设置为屏幕的0.6</span><br><span class="line">            p.width = (int) (d.getWidth() * 0.50);    //宽度设置为屏幕的0.95</span><br><span class="line">            activity.getWindow().setAttributes(p);     //设置生效</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onActivityStarted(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onActivityResumed(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onActivityPaused(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onActivityStopped(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onActivitySaveInstanceState(Activity activity, Bundle outState) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onActivityDestroyed(Activity activity) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>在application中注册<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onCreate() &#123;</span><br><span class="line">  super.onCreate();</span><br><span class="line">  registerActivityLifecycleCallbacks(mActivityLifecycleCallbacks);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>application注销的时候取消注册<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onTerminate() &#123;</span><br><span class="line">    super.onTerminate();</span><br><span class="line">    unregisterActivityLifecycleCallbacks(mActivityLifecycleCallbacks);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-使用-pyenv-管理-Python-版本" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            
	
		<a href="/archives/739fa792.html" itemprop="url">
            <img src="https://images.pexels.com/photos/1387037/pexels-photo-1387037.jpeg?cs=srgb&dl=beach-freedom-friendship-1387037.jpg&fm=jpg" class="article-banner" />
        </a>
	



        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/739fa792.html">使用 pyenv 管理 Python 版本</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/739fa792.html">
            <time datetime="2018-09-05T00:53:52.000Z" itemprop="datePublished">2018-09-05</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Python/">Python</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Python/">Python</a>, <a class="tag-link" href="/tags/pyenv/">pyenv</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>转自<a href="http://einverne.github.io/post/2017/04/pyenv.html" target="_blank" rel="noopener">使用 pyenv 管理 Python 版本 </a>,略有修改。</p>
<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>在使用python的时候，我们经常被python项目混乱的版本以及复杂的包依赖搞得头晕脑胀，但是自从有了pyenv和anaconda(python包虚拟环境，包依赖)，一切都清晰明了了。</p>
<p>pyenv 是 Python 版本管理工具。 pyenv 可以改变全局的 Python 版本，安装多个版本的 Python， 设置目录级别的 Python 版本，还能创建和管理 virtual python environments 。所有的设置都是用户级别的操作，不需要 sudo 命令。</p>
<p>pyenv 主要用来管理 Python 的版本，比如一个项目需要 Python 2.x ，一个项目需要 Python 3.x 。 而 anaconda 主要用来管理 Python 包的依赖，不同项目需要依赖的包版本不同，则需要使用虚拟环境。</p>
<p>pyenv 通过系统修改环境变量来实现 Python 不同版本的切换。而 anaconda 通过将 Python 包安装到一个目录来作为Python 包虚拟环境，通过切换目录来实现不同包环境间的切换。</p>
<p>pyenv 的美好之处在于，它并没有使用将不同的 PATH 植入不同的Shell这种高耦合的工作方式，而是简单的在 PATH 的最前面插入了一个垫片路径（shims）：~/.pyenv/shims:/usr/local/bin:/usr/bin:/bin。所有对 Python 可执行文件的查找都会首先被这个 shims 路径截获，从而使后方的系统路径失效。</p>
<h4 id="pyenv安装"><a href="#pyenv安装" class="headerlink" title="pyenv安装"></a>pyenv安装</h4><p>具体的安装方式参照 <a href="https://github.com/yyuu/pyenv#installation" target="_blank" rel="noopener">官网</a><br>我这里是Mac，推荐使用brew安装。<br>安装成功之后，在.bashrc 或者 .bash_profile 中添加三行来开启自动补全.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=&quot;$HOME/.pyenv/bin:$PATH&quot;</span><br><span class="line">eval &quot;$(pyenv init -)&quot;</span><br><span class="line">eval &quot;$(pyenv virtualenv-init -)&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="pyenv-常用命令"><a href="#pyenv-常用命令" class="headerlink" title="pyenv 常用命令"></a>pyenv 常用命令</h3><p>使用 pyenv commands 显示所有可用命令</p>
<ul>
<li><p>查看本机安装 Python 版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv versions</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看可安装 Python 版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv install -l</span><br></pre></td></tr></table></figure>
</li>
<li><p>python 安装与卸载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install 2.7.3   # 安装python</span><br><span class="line">$ pyenv uninstall 2.7.3 # 卸载python</span><br></pre></td></tr></table></figure>
</li>
<li><p>python切换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv global 2.7.3  # 设置全局的 Python 版本，通过将版本号写入 ~/.pyenv/version 文件的方式。</span><br><span class="line">$ pyenv local 2.7.3 # 设置 Python 本地版本，通过将版本号写入当前目录下的 .python-version 文件的方式。通过这种方式设置的 Python 版本优先级较 global 高。</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>python优先级</p>
<p>shell &gt; local &gt; global</p>
<p>pyenv 会从当前目录开始向上逐级查找 .python-version 文件，直到根目录为止。若找不到，就用 global 版本。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv shell 2.7.3 # 设置面向 shell 的 Python 版本，通过设置当前 shell 的 PYENV_VERSION 环境变量的方式。这个版本的优先级比 local 和 global 都要高。–unset 参数可以用于取消当前 shell 设定的版本。</span><br><span class="line">$ pyenv shell --unset</span><br><span class="line"></span><br><span class="line">$ pyenv rehash  # 创建垫片路径（为所有已安装的可执行文件创建 shims，如：~/.pyenv/versions/*/bin/*，因此，每当你增删了 Python 版本或带有可执行文件的包（如 pip）以后，都应该执行一次本命令）</span><br></pre></td></tr></table></figure></p>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-使用Pandas-Merge替代Excel-Vlookup" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/651663e0.html">使用Pandas Merge替代Excel Vlookup</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/651663e0.html">
            <time datetime="2018-08-22T02:51:20.000Z" itemprop="datePublished">2018-08-22</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Python/">Python</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Pandas/">Pandas</a>, <a class="tag-link" href="/tags/VLookup/">VLookup</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            <p><p><blockquote><p>事情起因是媳妇儿在处理excel数据的时候，用VLookup查找查找数据的时候，发现经常出现查找错误，折腾了好几天，也没找到规律，所以我决定用Python Pandas替换Excel的VLookup函数。</p>
</blockquote></p>
<p>假设我们有这样一个Excel文件：<br>Sheet1为：<br><img src="/images/excel/1.png" alt=""><br>Sheet2为：<br><img src="/images/excel/2.png" alt=""><br>其中Sheet2数据比Sheet1数据多一条，我们要实现的目标是把Sheet1中人员对应的年龄放到Sheet2对应的人员上，如果人员在Sheet1中不存在，则不用处理。<br>预期结果如下图所示：<br><img src="/images/excel/3.png" alt=""><br>正常我们可以用Excel的VLookup实现这个功能，但是不知道为啥，VLookup在数量大的时候经常查询错乱，所以这里用Pandas的merge功能实现VLookup。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">What is vlookup? Vlookup is essentially combining two different tables using a shared column.</span><br></pre></td></tr></table></figure></p></p>
            <p class="article-more-link">
                <a href="/archives/651663e0.html#more">查看更多</a>
            </p>
        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Android项目在Gitlab-CI上的使用" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/b732e7e5.html">Android项目在Gitlab-CI上的使用</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/b732e7e5.html">
            <time datetime="2018-08-20T01:40:58.000Z" itemprop="datePublished">2018-08-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/CI/">CI</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="Setting-up-GitLab-CI-for-Android-projects"><a href="#Setting-up-GitLab-CI-for-Android-projects" class="headerlink" title="Setting up GitLab CI for Android projects"></a>Setting up GitLab CI for Android projects</h4><h5 id="搭建Android环境"><a href="#搭建Android环境" class="headerlink" title="搭建Android环境"></a>搭建Android环境</h5><h6 id="下载JDK"><a href="#下载JDK" class="headerlink" title="下载JDK"></a>下载JDK</h6><h6 id="下载Android-Sdk"><a href="#下载Android-Sdk" class="headerlink" title="下载Android Sdk"></a>下载Android Sdk</h6><p>由于我们安装的Runner环境一般都是在服务器上，是没有界面操作的，所有需要我们通过无ui 的方式下载更新安卓sdk，<br>先下载android sdk tools<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- wget --quiet --output-document=android-sdk.zip https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip</span><br><span class="line">- unzip -q android-sdk.zip -d android-sdk-linux</span><br></pre></td></tr></table></figure></p>
<p>要使用sdk tools下载sdk首先需要接受安卓sdk的协议<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- mkdir android-sdk-linux/licenses</span><br><span class="line">- printf &quot;8933bad161af4178b1185d1a37fbf41ea5269c55\nd56f5187479451eabf01fb78af6dfcb131a6481e&quot; &gt; android-sdk-linux/licenses/android-sdk-license</span><br><span class="line">- printf &quot;84831b9409646a918e30573bab4c9c91346d8abd&quot; &gt; android-sdk-linux/licenses/android-sdk-preview-license</span><br></pre></td></tr></table></figure></p>
<h6 id="下载sdk"><a href="#下载sdk" class="headerlink" title="下载sdk"></a>下载sdk</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/home/gitlab-runner/CI_runner/android-sdk-linux/tools/bin/sdkmanager --update &gt; update.log</span><br><span class="line"># SDK检查更新</span><br><span class="line">/home/gitlab-runner/CI_runner/android-sdk-linux/tools/bin/sdkmanager &quot;platforms;android-$&#123;ANDROID_COMPILE_SDK&#125;&quot; &quot;build-tools;$&#123;ANDROID_BUILD_TOOLS&#125;&quot; &quot;extras;google;m2repository&quot; &quot;extras;android;m2repository&quot; &gt; installPlatform.log</span><br><span class="line">#下载sdk，support包等</span><br><span class="line">/home/gitlab-runner/CI_runner/android-sdk-linux/tools/bin/sdkmanager &quot;extras;m2repository;com;android;support;constraint;constraint-layout;1.0.2&quot; &gt; installPlatform.log</span><br><span class="line"># 下载constrain包</span><br></pre></td></tr></table></figure>
<p>但是由于众所周知的GFW的问题，在国内下载安卓sdk的速度着实让人崩溃，所以一般需要配置上国内镜像，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdkmanager --proxy=http --proxy_host=mirrors.neusoft.edu.cn --proxy_port=80 --update</span><br></pre></td></tr></table></figure></p>
<p>具体镜像可以从网上找一下。</p>
<h6 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># vim /home/gitlab-runner/.bash_profile</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/home/gitlab-runner/CI_runner/jdk1.8.0_181</span><br><span class="line">export ANDROID_HOME=/home/gitlab-runner/CI_runner/android-sdk-linux</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export PATH=$PATH:$ANDROID_HOME/tools/bin</span><br><span class="line">export PATH=$PATH:$ANDROID_HOME/platform-tools/</span><br></pre></td></tr></table></figure>
<h5 id="编写Gitlab-CI脚本"><a href="#编写Gitlab-CI脚本" class="headerlink" title="编写Gitlab CI脚本"></a>编写Gitlab CI脚本</h5><p>配置完环境之后，就需要编写CI脚本完成自动打包，测试，部署等工作。</p>
<h6 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h6><p>配置好 Runner 之后，我们要做的事情就是在项目根目录中添加 .gitlab-ci.yml 文件了。<br>当我们添加了 .gitlab-ci.yml 文件后，每次提交代码或者合并 MR 都会自动运行构建任务了。</p>
<p>还记得 Pipeline 是怎么触发的吗？Pipeline 也是通过提交代码或者合并 MR 来触发的！<br>那么 Pipeline 和 .gitlab-ci.yml 有什么关系呢？<br>其实 .gitlab-ci.yml 就是在定义 Pipeline 而已拉！</p>
<h6 id="基本写法"><a href="#基本写法" class="headerlink" title="基本写法"></a>基本写法</h6><p>我们先来看看 .gitlab-ci.yml 是怎么写的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 定义 stages</span><br><span class="line">stages:</span><br><span class="line">  - build</span><br><span class="line">  - test</span><br><span class="line"># 定义 job</span><br><span class="line">job1:</span><br><span class="line">  stage: test</span><br><span class="line">  script:</span><br><span class="line">    - echo &quot;I am job1&quot;</span><br><span class="line">    - echo &quot;I am in test stage&quot;</span><br><span class="line"># 定义 job</span><br><span class="line">job2:</span><br><span class="line">  stage: build</span><br><span class="line">  script:</span><br><span class="line">    - echo &quot;I am job2&quot;</span><br><span class="line">    - echo &quot;I am in build stage&quot;</span><br></pre></td></tr></table></figure></p>
<p>写起来很简单吧！用 stages 关键字来定义 Pipeline 中的各个构建阶段，然后用一些非关键字来定义 jobs。<br>每个 job 中可以可以再用 stage 关键字来指定该 job 对应哪个 stage。<br>job 里面的 script 关键字是最关键的地方了，也是每个 job 中必须要包含的，它表示每个 job 要执行的命令。</p>
<p>回想一下我们之前提到的 Stages 和 Jobs 的关系，然后猜猜上面例子的运行结果？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">I am job2</span><br><span class="line">I am in build stage</span><br><span class="line">I am job1</span><br><span class="line">I am in test stage</span><br></pre></td></tr></table></figure>
<p>根据我们在 stages 中的定义，build 阶段要在 test 阶段之前运行，所以 stage:build 的 jobs 会先运行，之后才会运行 stage:test 的 jobs。</p>
<h6 id="常用的关键字"><a href="#常用的关键字" class="headerlink" title="常用的关键字"></a>常用的关键字</h6><p>下面介绍一些常用的关键字，想要更加详尽的内容请前往 <a href="http://docs.gitlab.com/ce/ci/yaml/README.html" target="_blank" rel="noopener">官方文档</a></p>
<ul>
<li><p>stages<br>定义 Stages，默认有三个 Stages，分别是 build, test, deploy。</p>
</li>
<li><p>before_script<br>定义任何 Jobs 运行前都会执行的命令。</p>
</li>
<li><p>after_script<br>定义任何 Jobs 运行完后都会执行的命令。</p>
</li>
<li><p>variables &amp;&amp; Job.variables<br>定义环境变量。<br>如果定义了 Job 级别的环境变量的话，该 Job 会优先使用 Job 级别的环境变量。</p>
</li>
</ul>
<h5 id="我自己在项目中用到的例子"><a href="#我自己在项目中用到的例子" class="headerlink" title="我自己在项目中用到的例子"></a>我自己在项目中用到的例子</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">image: openjdk:8-jdk</span><br><span class="line"></span><br><span class="line">cache:</span><br><span class="line">  paths:</span><br><span class="line">    - .m2/</span><br><span class="line">    - .gradle/</span><br><span class="line"></span><br><span class="line">variables:</span><br><span class="line">  ANDROID_COMPILE_SDK: &quot;27&quot;</span><br><span class="line">  ANDROID_BUILD_TOOLS: &quot;27.0.3&quot;</span><br><span class="line">  ANDROID_SDK_TOOLS: &quot;27.1.1&quot;</span><br><span class="line">  APP_NAME: &quot;长白山先锋&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">before_script:</span><br><span class="line">#  - apt-get --quiet update --yes</span><br><span class="line">#  - apt-get --quiet install --yes wget tar unzip lib32stdc++6 lib32z1</span><br><span class="line">#</span><br><span class="line">#  - wget --quiet --output-document=android-sdk.zip https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip</span><br><span class="line">#  - unzip -q android-sdk.zip -d android-sdk-linux</span><br><span class="line"></span><br><span class="line">#  - mkdir android-sdk-linux/licenses</span><br><span class="line">#  - printf &quot;8933bad161af4178b1185d1a37fbf41ea5269c55\nd56f5187479451eabf01fb78af6dfcb131a6481e&quot; &gt; android-sdk-linux/licenses/android-sdk-license</span><br><span class="line">#  - printf &quot;84831b9409646a918e30573bab4c9c91346d8abd&quot; &gt; android-sdk-linux/licenses/android-sdk-preview-license</span><br><span class="line">  - echo $PATH</span><br><span class="line">  - whoami</span><br><span class="line">  - echo $PWD</span><br><span class="line">  - /home/gitlab-runner/CI_runner/android-sdk-linux/tools/bin/sdkmanager --update &gt; update.log</span><br><span class="line">  - /home/gitlab-runner/CI_runner/android-sdk-linux/tools/bin/sdkmanager &quot;platforms;android-$&#123;ANDROID_COMPILE_SDK&#125;&quot; &quot;build-tools;$&#123;ANDROID_BUILD_TOOLS&#125;&quot; &quot;extras;google;m2repository&quot; &quot;extras;android;m2repository&quot; &gt; installPlatform.log</span><br><span class="line">  - /home/gitlab-runner/CI_runner/android-sdk-linux/tools/bin/sdkmanager &quot;extras;m2repository;com;android;support;constraint;constraint-layout;1.0.2&quot; &gt; installPlatform.log</span><br><span class="line"></span><br><span class="line">#  - export ANDROID_HOME=$PWD/android-sdk-linux</span><br><span class="line">#  - export PATH=$PATH:$PWD/android-sdk-linux/platform-tools/</span><br><span class="line">  - chmod +x ./gradlew</span><br><span class="line"></span><br><span class="line">stages:</span><br><span class="line">  - build</span><br><span class="line">#  - test</span><br><span class="line">  - deploy</span><br><span class="line"></span><br><span class="line">build:</span><br><span class="line">  stage: build</span><br><span class="line">  only:</span><br><span class="line">      - v3_0502</span><br><span class="line">  script:</span><br><span class="line">#    - ./gradlew assembleRelease</span><br><span class="line">    - ./gradlew assembleRelease</span><br><span class="line">  artifacts:</span><br><span class="line">    paths:</span><br><span class="line">    - $PWD/apk/</span><br><span class="line"></span><br><span class="line">#unitTests:</span><br><span class="line">#  stage: test</span><br><span class="line">#  script:</span><br><span class="line">#    - ./gradlew test</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">  stage: deploy</span><br><span class="line">  script:</span><br><span class="line">    - echo $PATH</span><br><span class="line">    - rm -rfv /data/apps/$&#123;APP_NAME&#125;</span><br><span class="line">    - mkdir /data/apps/$&#123;APP_NAME&#125;</span><br><span class="line">    - cp $PWD/apk/*.apk /data/apps/$&#123;APP_NAME&#125;</span><br><span class="line">    - lftp -u ftpuser_name,passwd -p port -e &quot;mirror -R --delete --only-newer /data/apps/$&#123;APP_NAME&#125; /ftp/apk ;quit;&quot; sftp://xxx.xxx.xxx.xxx</span><br><span class="line"></span><br><span class="line">    # 把本地/data/apps/$&#123;APP_NAME&#125;目录的文件拷贝到服务器/ftp/apk目录下，并且删除服务器/ftp/apk目录下的其他文件</span><br></pre></td></tr></table></figure>
<p><font style="color:red">问题 1</font><br>如果在代码提交之后,CI在下载代码的时候，报以下错误：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Peer&apos;s certificate issuer has been marked as not trusted by the user.</span><br><span class="line">ERROR: Job failed: exit status 1</span><br></pre></td></tr></table></figure></p>
<p>只需要在runner服务器上修改如下就行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># vim /etc/profile</span><br><span class="line">#在最后一行加入</span><br><span class="line"></span><br><span class="line">export GIT_SSL_NO_VERIFY=1</span><br></pre></td></tr></table></figure></p>
<p><font style="color:red">问题 2</font><br>在build结束的时候，runner会把生成的包当成artifacts上传到CI服务器上，如下所示文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">artifacts:</span><br><span class="line">    paths:</span><br><span class="line">    - $PWD/apk/</span><br></pre></td></tr></table></figure></p>
<p>但是gitlba 默认只给每个项目100M的附件空间，所以如果你项目生成的文件比较多，有可能会报一下错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Uploading artifacts to coordinator... too large archive  id=1004 responseStatus=413 Request Entity Too Large status=413 Request Entity Too Large token=y9oZhbeX</span><br><span class="line">FATAL: Too large</span><br></pre></td></tr></table></figure></p>
<p>这时候只需调整如图所示图片即可<br><img src="/images/runners/2.png" alt=""></p>
<p><font style="color:red">问题 3</font><br>修改runner 任务artifacts上传存储路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/gitlab/gitlab.rb</span><br><span class="line"></span><br><span class="line">### For storing GitLab application uploads, eg. LFS objects, build artifacts</span><br><span class="line">###! Docs: https://docs.gitlab.com/ce/development/shared_files.html</span><br><span class="line"># gitlab_rails[&apos;shared_path&apos;] = &apos;/var/opt/gitlab/gitlab-rails/shared&apos;</span><br><span class="line">gitlab_rails[&apos;shared_path&apos;] = &apos;/data/gitlab_shared&apos;</span><br></pre></td></tr></table></figure></p>
<p>然后执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">然后执行sudo gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure></p>
<h5 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h5><ul>
<li><a href="https://my.oschina.net/zhenian/blog/469013" target="_blank" rel="noopener">Android SDK 国内镜像</a></li>
<li><a href="https://about.gitlab.com/2018/02/14/setting-up-gitlab-ci-for-android-projects/" target="_blank" rel="noopener">Setting up GitLab CI for Android projects</a></li>
<li><a href="https://about.gitlab.com/2016/11/30/setting-up-gitlab-ci-for-android-projects/" target="_blank" rel="noopener">Setting up GitLab CI for Android projects</a></li>
<li><a href="http://www.androiddevtools.cn/#" target="_blank" rel="noopener">androiddevtools</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-搭建GitLab-CI服务器" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/d45e8871.html">搭建GitLab CI服务器</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/d45e8871.html">
            <time datetime="2018-08-16T05:45:25.000Z" itemprop="datePublished">2018-08-16</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/CI/">CI</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/CI/">CI</a>, <a class="tag-link" href="/tags/Gitlab/">Gitlab</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><p>之前已经用Bitnami-gitlab一体包已经在虚拟机上搭建了Git服务器，在项目开发过程中，经常面临频繁打包的问题，搞得软件研发人员很疲惫，之前就听说过可以使用“持续集成”的思路解决这样的问题，并且能够提高工作效率，所在才有了今天在持续集成上的尝试。</p>
<h4 id="什么是“持续集成”"><a href="#什么是“持续集成”" class="headerlink" title="什么是“持续集成”"></a>什么是“持续集成”</h4><blockquote><p>持续集成（Continuous Integration）指的是，频繁地（一天多次）将代码集成到主干。<br>持续集成的目的，就是让产品可以快速迭代，同时还能保持高质量。<br>它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。</p>
</blockquote>
<h4 id="使用GitLab-CI进行持续集成"><a href="#使用GitLab-CI进行持续集成" class="headerlink" title="使用GitLab CI进行持续集成"></a>使用GitLab CI进行持续集成</h4><p>我这里因为已经使用了Gitlab作为代码服务器，而Gitlab本身已经支持了CI，所以我这里就选择了使用Gitlab CI进行持续集成。</p>
<p>在开始之前先了解一些持续集成的相关概念。</p>
<h5 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a>Pipeline</h5><p>一次 Pipeline 其实相当于一次构建任务，里面可以包含多个流程，如安装依赖、运行测试、编译、部署测试服务器、部署生产服务器等流程。<br>任何提交或者 Merge Request 的合并都可以触发 Pipeline，如下图所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+------------------+           +----------------+</span><br><span class="line">|                  |  trigger  |                |</span><br><span class="line">|   Commit / MR    +----------&gt;+    Pipeline    |</span><br><span class="line">|                  |           |                |</span><br><span class="line">+------------------+           +----------------+</span><br></pre></td></tr></table></figure></p>
<h5 id="Stages"><a href="#Stages" class="headerlink" title="Stages"></a>Stages</h5><p>Stages 表示构建阶段，说白了就是上面提到的流程。<br>我们可以在一次 Pipeline 中定义多个 Stages，这些 Stages 会有以下特点：</p>
<ol>
<li>所有 Stages 会按照顺序运行，即当一个 Stage 完成后，下一个 Stage 才会开始</li>
<li>只有当所有 Stages 完成后，该构建任务 (Pipeline) 才会成功</li>
<li>如果任何一个 Stage 失败，那么后面的 Stages 不会执行，该构建任务 (Pipeline) 失败</li>
</ol>
<p>因此，Stages 和 Pipeline 的关系就是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------------------------------------+</span><br><span class="line">|                                                        |</span><br><span class="line">|  Pipeline                                              |</span><br><span class="line">|                                                        |</span><br><span class="line">|  +-----------+     +------------+      +------------+  |</span><br><span class="line">|  |  Stage 1  |----&gt;|   Stage 2  |-----&gt;|   Stage 3  |  |</span><br><span class="line">|  +-----------+     +------------+      +------------+  |</span><br><span class="line">|                                                        |</span><br><span class="line">+--------------------------------------------------------+</span><br></pre></td></tr></table></figure></p>
<h5 id="Jobs"><a href="#Jobs" class="headerlink" title="Jobs"></a>Jobs</h5><p>Jobs 表示构建工作，表示某个 Stage 里面执行的工作。<br>我们可以在 Stages 里面定义多个 Jobs，这些 Jobs 会有以下特点：</p>
<ol>
<li>相同 Stage 中的 Jobs 会并行执行</li>
<li>相同 Stage 中的 Jobs 都执行成功时，该 Stage 才会成功</li>
<li>如果任何一个 Job 失败，那么该 Stage 失败，即该构建任务 (Pipeline) 失败</li>
</ol>
<p>所以，Jobs 和 Stage 的关系图就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+------------------------------------------+</span><br><span class="line">|                                          |</span><br><span class="line">|  Stage 1                                 |</span><br><span class="line">|                                          |</span><br><span class="line">|  +---------+  +---------+  +---------+   |</span><br><span class="line">|  |  Job 1  |  |  Job 2  |  |  Job 3  |   |</span><br><span class="line">|  +---------+  +---------+  +---------+   |</span><br><span class="line">|                                          |</span><br><span class="line">+------------------------------------------+</span><br></pre></td></tr></table></figure>
<h4 id="GitLab-Runner"><a href="#GitLab-Runner" class="headerlink" title="GitLab Runner"></a>GitLab Runner</h4><p>简介<br>理解了上面的基本概念之后，有没有觉得少了些什么东西 —— 由谁来执行这些构建任务呢？<br>答案就是 GitLab Runner 了！</p>
<p>想问为什么不是 GitLab CI 来运行那些构建任务？<br>一般来说，构建任务都会占用很多的系统资源 (譬如编译代码)，而 GitLab CI 又是 GitLab 的一部分，如果由 GitLab CI 来运行构建任务的话，在执行构建任务的时候，GitLab 的性能会大幅下降。</p>
<p>GitLab CI 最大的作用是管理各个项目的构建状态，因此，运行构建任务这种浪费资源的事情就交给 GitLab Runner 来做拉！<br>因为 <font style="color:red">GitLab Runner 可以安装到不同的机器上 </font> ，所以在构建任务运行期间并不会影响到 GitLab 的性能.</p>
<p>我这里采用的是：<br>git服务器地址为：192.168.1.113，<br>Gitlab runner地址为192.168.1.120</p>
<h5 id="安装GitLab-Runner"><a href="#安装GitLab-Runner" class="headerlink" title="安装GitLab Runner"></a>安装GitLab Runner</h5><p>参照<a href="https://docs.gitlab.com/runner/install/" target="_blank" rel="noopener">官网</a>,选择一种方式进行安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># For RHEL/CentOS/Fedora</span><br><span class="line">curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash</span><br><span class="line"></span><br><span class="line"># For RHEL/CentOS/Fedora</span><br><span class="line">sudo yum install gitlab-runner</span><br></pre></td></tr></table></figure></p>
<h5 id="注册-Runner"><a href="#注册-Runner" class="headerlink" title="注册 Runner"></a>注册 Runner</h5><p>安装好 GitLab Runner 之后，我们只要启动 Runner 然后和 CI 绑定就可以了。</p>
<ul>
<li>打开你 GitLab 中的项目页面，在项目设置中找到 runners<br><img src="/images/runners/1.png" alt=""></li>
<li>运行 <font style="color:orange">sudo gitlab-ci-multi-runner register</font></li>
<li>输入 CI URL</li>
<li>输入 Token</li>
<li>输入 Runner 的名字</li>
<li>输入 gitlab-ci tags</li>
<li>完成</li>
</ul>
<p>当注册好 Runner 之后，可以用 sudo gitlab-runner list 命令来查看各个 Runner 的状态：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># sudo gitlab-runner list</span><br><span class="line">Listing configured runners                          ConfigFile=/etc/gitlab-runner/config.toml</span><br><span class="line">localhost.localdomain                               Executor=shell Token=2a627041123ff25c490629d80f0834 URL=https://192.168.1.113/</span><br></pre></td></tr></table></figure></p>
<p><font style="color:red">Register问题1</font><br>这一步比较坑，因为bitnami-gitlab一体包采用的是https的访问方式，所以在注册Runner的过程，一直报如下错误：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Registering runner... failed                 runner=5nuRqxMY status=couldn&apos;t execute POST against https://192.168.1.113/api/v4/runners: Post https://192.168.1.113/api/v4/runners: x509: cannot validate certificate for 192.168.1.113 because it doesn&apos;t contain any IP SANs</span><br><span class="line">PANIC: Failed to register this runner. Perhaps you are having network problems</span><br></pre></td></tr></table></figure></p>
<p>解决方式参考如下地址，<a href="https://stackoverflow.com/questions/44458410/gitlab-ci-runner-ignore-self-signed-certificate" target="_blank" rel="noopener">gitlab-ci-runner-ignore-self-signed-certificate</a></p>
<ul>
<li><p>First edit ssl configuration on the GitLab server (not the runner)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /opt/gitlab/embedded/ssl/openssl.cnf</span><br><span class="line"></span><br><span class="line">[ v3_ca ]</span><br><span class="line">subjectAltName=IP:192.168.1.1 &lt;---- Add this line. 192.168.1.1 is your GitLab server IP.</span><br></pre></td></tr></table></figure>
</li>
<li><p>Re-generate self-signed certificate</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/gitlab/ssl</span><br><span class="line">sudo openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout /etc/gitlab/ssl/192.168.1.1.key -out /etc/gitlab/ssl/192.168.1.1.crt</span><br><span class="line">sudo openssl dhparam -out /etc/gitlab/ssl/dhparam.pem 2048</span><br><span class="line">sudo gitlab-ctl restart</span><br></pre></td></tr></table></figure>
</li>
<li><p>Copy the new CA to the GitLab CI runner</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp /etc/gitlab/ssl/192.168.1.113.crt root@192.168.1.120:/etc/gitlab-runner/certs</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>这样就解决Https证书问题了。</p>
<p><font style="color:red">Register问题2</font><br>在mac端配置Runner的时候，会遇到如下问题：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x509: certificate signed by unknown authority</span><br></pre></td></tr></table></figure></p>
<p>主要是mac对git代码服务器的证书不信任，在注册的时候加上ca证书就行了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gitlab-runner register --tls-ca-file 192.168.1.113.crt</span><br></pre></td></tr></table></figure></p>
<h5 id="unregister-Runner"><a href="#unregister-Runner" class="headerlink" title="unregister Runner"></a>unregister Runner</h5><ul>
<li><p>所有runners</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner unregister --all-runners</span><br></pre></td></tr></table></figure>
</li>
<li><p>By URL and token:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner unregister --url http://gitlab.example.com/ --token t0k3n</span><br></pre></td></tr></table></figure>
</li>
<li><p>By name:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner unregister --name test-runner</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>完毕！</p>
<p>如果想知道如何用Gitlab-CI设置Android项目，请参考我下一篇文章<a href="http://inicb.com/archives/b732e7e5.html">Android项目在Gitlab-CI上的使用</a>;</p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ul>
<li><a href="https://docs.gitlab.com/runner/" target="_blank" rel="noopener">GitLab Runner</a></li>
<li><a href="https://scarletsky.github.io/2016/07/29/use-gitlab-ci-for-continuous-integration/" target="_blank" rel="noopener">用 GitLab CI 进行持续集成</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <article id="post-Android实现毛玻璃效果-高斯模糊" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/archives/a0439c.html">Android实现毛玻璃效果(高斯模糊)</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/archives/a0439c.html">
            <time datetime="2018-08-15T07:53:36.000Z" itemprop="datePublished">2018-08-15</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/StackBlur/">StackBlur</a>, <a class="tag-link" href="/tags/毛玻璃/">毛玻璃</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>在项目开发过程，有时候为了界面效果美观，需要在背景处用到毛玻璃效果，但是在 Android 上也能实现毛玻璃效果？性能如何？</p>
<p>在网上看到这篇文章，大家可以参考一下</p>
<p><a href="http://wingjay.com/2016/03/12/%E4%B8%80%E7%A7%8D%E5%BF%AB%E9%80%9F%E6%AF%9B%E7%8E%BB%E7%92%83%E8%99%9A%E5%8C%96%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0/" target="_blank" rel="noopener">一种快速毛玻璃虚化效果实现</a></p>
<p>主要思想就是，</p>
<ol>
<li>对要进行模糊的图片和界面（需要获取屏幕截图）进行压缩。</li>
<li>对压缩后的图片进行模糊处理。主要采用 <a href="http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html" target="_blank" rel="noopener">StackBlur</a> 模糊算法，这种算法应用非常广泛，能得到非常良好的毛玻璃效果。在这里，使用是它的 Java 实现代码<a href="https://github.com/wingjay/BlurImageView/blob/master/blurimageviewlib/src/main/java/com/wingjay/blurimageviewlib/FastBlurUtil.java" target="_blank" rel="noopener">FastBlur.java</a>。<br></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public static Bitmap doBlur(Bitmap sentBitmap, int radius, boolean canReuseInBitmap)</span><br></pre></td></tr></table></figure>
<p>可以看出，使用方法非常简单，传入待虚化的 bitmap、虚化程序(一般为 8)、和是否重用 flag。</p>
<h5 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h5><ul>
<li><a href="https://github.com/kikoso/android-stackblur" target="_blank" rel="noopener">android-stackblur</a></li>
</ul>

        
        </div>


    <!-- 
          <style>
            .linkColor{
                color:#258FC6
            }
            .copyrightFont{
                padding-left:10px;
            }
            .copyrightTitle{
              font-weight:bold;
              font-size:15px;
              display:block;
              padding-left:10px;
              margin-top:5px;
              margin-bottom:5px;
            }
          </style>
          <div style="border: 1px solid black">
            <div>
                <span class='copyrightTitle'>版权声明</span>
                <img src="">
                <br/>
                <p class='copyrightFont'>
                  <a href="http://www.inicb.com" class='linkColor'>Ini&#39;s Blog</a>
                  by
                  <a href="http://www.inicb.com"  class='linkColor'>ini</a>
                  is licensed under a
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>Creative Commons BY-NC-ND 4.0 International License</a>.
                  <br/>
                  由
                  <a href="http://www.inicb.com"  class='linkColor'>王建磊</a>
                  创作并维护的
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  采用
                  <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"  class='linkColor'>创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。
                  <br/>
                  本文首发于
                  <a href="http://www.inicb.com"  class='linkColor'>Ini&#39;s Blog</a>
                  （ <a href="http://www.inicb.com"  class='linkColor'>http://www.inicb.com</a> ）
                  ，版权所有，侵权必究。
                </p>
            </div>
        </div>
         -->

    
  </div>

    <!--  -->
</article>




    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/ed7c431b.html" class="thumbnail">
    
    
        <span style="background-image:url(https://images.pexels.com/photos/1209658/pexels-photo-1209658.jpeg?cs=srgb&amp;dl=backlit-blurred-background-close-up-1209658.jpg&amp;fm=jpg)" alt="RecyclerView根据内容多少动态设置高度" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a></p>
                            <p class="item-title"><a href="/archives/ed7c431b.html" class="title">RecyclerView根据内容多少动态设置高度</a></p>
                            <p class="item-date"><time datetime="2019-01-11T05:58:36.000Z" itemprop="datePublished">2019-01-11</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/f2a632a2.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a></p>
                            <p class="item-title"><a href="/archives/f2a632a2.html" class="title">Android P使用私有API弹出warning(转载)</a></p>
                            <p class="item-date"><time datetime="2018-12-29T07:21:32.000Z" itemprop="datePublished">2018-12-29</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/6d1addbc.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/J2EE/">J2EE</a></p>
                            <p class="item-title"><a href="/archives/6d1addbc.html" class="title">Cookie 的路径以及 Cookie 域，设置同一域名下多个Tomcat共享Cookie</a></p>
                            <p class="item-date"><time datetime="2018-12-29T03:22:55.000Z" itemprop="datePublished">2018-12-29</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/9b175123.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/地图/">地图</a></p>
                            <p class="item-title"><a href="/archives/9b175123.html" class="title">使用百度地图API解决区县级以下行政区划轮廓问题</a></p>
                            <p class="item-date"><time datetime="2018-10-10T08:30:17.000Z" itemprop="datePublished">2018-10-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/archives/2c02c669.html" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术开发/">技术开发</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术开发/Android/">Android</a></p>
                            <p class="item-title"><a href="/archives/2c02c669.html" class="title">Android修改全局Window窗口大小</a></p>
                            <p class="item-date"><time datetime="2018-09-10T23:54:42.000Z" itemprop="datePublished">2018-09-11</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Gitlab/">Gitlab</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/区块链/">区块链</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/">技术开发</a><span class="category-list-count">32</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Android/">Android</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/CI/">CI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/HEXO/">HEXO</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/J2EE/">J2EE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/LINUX/">LINUX</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/NGINX/">NGINX</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/Python/">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/SQLMAP/">SQLMAP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/WeChat/">WeChat</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/分布式/">分布式</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/博客/">博客</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/地图/">地图</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/工具箱/">工具箱</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术开发/开发工具/">开发工具</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><span class="category-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-P/">Android P</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-Studio/">Android Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Atom/">Atom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BURP/">BURP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Baidu-Map/">Baidu Map</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI/">CI</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Centos/">Centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/">Cookie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FastDFS/">FastDFS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitlab/">Gitlab</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HEXO/">HEXO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/">HTTPS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICARUS/">ICARUS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log/">Log</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NGINX/">NGINX</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nas/">Nas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pandas/">Pandas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/">RecyclerView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLMAP/">SQLMAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSL/">SSL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StackBlur/">StackBlur</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VLookup/">VLookup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VPS/">VPS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webview-Video-FullScreen/">Webview Video FullScreen</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Window/">Window</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/">idea</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyenv/">pyenv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubntu/">ubntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/屏幕适配/">屏幕适配</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信公众号/">微信公众号</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/新时代e支部/">新时代e支部</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/毛玻璃/">毛玻璃</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动化/">自动化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/隧道/">隧道</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Android-P/" style="font-size: 10px;">Android P</a> <a href="/tags/Android-Studio/" style="font-size: 10px;">Android Studio</a> <a href="/tags/Atom/" style="font-size: 10px;">Atom</a> <a href="/tags/BURP/" style="font-size: 10px;">BURP</a> <a href="/tags/Baidu-Map/" style="font-size: 10px;">Baidu Map</a> <a href="/tags/CI/" style="font-size: 13.33px;">CI</a> <a href="/tags/Centos/" style="font-size: 10px;">Centos</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/FastDFS/" style="font-size: 10px;">FastDFS</a> <a href="/tags/Gitlab/" style="font-size: 13.33px;">Gitlab</a> <a href="/tags/HEXO/" style="font-size: 10px;">HEXO</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hexo/" style="font-size: 13.33px;">Hexo</a> <a href="/tags/ICARUS/" style="font-size: 10px;">ICARUS</a> <a href="/tags/Log/" style="font-size: 10px;">Log</a> <a href="/tags/NGINX/" style="font-size: 10px;">NGINX</a> <a href="/tags/Nas/" style="font-size: 10px;">Nas</a> <a href="/tags/Nginx/" style="font-size: 16.67px;">Nginx</a> <a href="/tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/RecyclerView/" style="font-size: 10px;">RecyclerView</a> <a href="/tags/SQLMAP/" style="font-size: 10px;">SQLMAP</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SSL/" style="font-size: 10px;">SSL</a> <a href="/tags/StackBlur/" style="font-size: 10px;">StackBlur</a> <a href="/tags/VLookup/" style="font-size: 10px;">VLookup</a> <a href="/tags/VPS/" style="font-size: 13.33px;">VPS</a> <a href="/tags/Webview-Video-FullScreen/" style="font-size: 10px;">Webview Video FullScreen</a> <a href="/tags/Window/" style="font-size: 10px;">Window</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/pyenv/" style="font-size: 10px;">pyenv</a> <a href="/tags/ubntu/" style="font-size: 10px;">ubntu</a> <a href="/tags/屏幕适配/" style="font-size: 10px;">屏幕适配</a> <a href="/tags/微信公众号/" style="font-size: 10px;">微信公众号</a> <a href="/tags/新时代e支部/" style="font-size: 10px;">新时代e支部</a> <a href="/tags/毛玻璃/" style="font-size: 10px;">毛玻璃</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/隧道/" style="font-size: 10px;">隧道</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io" target="_blank">Hexo</a>
                    </li>
                
                    <li>
                        <a href="http://www.jldaren.com" target="_blank">达仁科技</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
            <!-- 
             -->
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 ini<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
   <script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.6/dist/Valine.min.js"></script>

    <script>
        new Valine({
            el: '#valine-thread' ,
            notify:true,
            verify:false,
            app_id: '3RK5nvSxoKincwMiCVLCMFh1-gzGzoHsz',
            app_key: 'MD8jv5EFuHcMxEP2mz5CUbA0',
            placeholder: 'Just Do It'
        });
    </script>





    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
